<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8" >
    <meta name="baidu-site-verification" content="dIcXMeY8Ya" />
    
    <title>Java GC | 螃蟹以死</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.3, maximum-scale=1, user-scalable=0" />
    <meta name="keywords" content="螃蟹以死(Crab2Died)的个人博客，分享学习、工作的经验总结。涉及软件开发，大数据开发，分布式系统，微服务，前端开发等" />
    <meta itemprop="name" content="0" />
    <meta itemprop="image" content="https://www.seekpie.com/images/java/java_runtime.png  "/>
    <meta itemprop="description" name="description"  content="一. Java虚拟机内存区域1. 运行时数据区   2. 程序计数器(Program Counter Register)1、程序计数器是线程内(每个线程都有唯一的、封闭的)一小块内存区域2、计数器指定的是当前虚拟机执行指令的地址3、当虚拟机执行的是Native方法时,计数器值为空(Undefined),此内存区域是唯一一个在Java虚拟机规范中没有规定任何OutOfMemoryError   情况的区域.3. Java虚拟机栈(Java Virtual Machine Stacks)1、虚拟机栈是线程内部的、封闭的2、虚拟机栈描述的是java方法执行的内存模型3、每个方法在执行的同时都会创建一个栈帧(Stack Frame)用于存储局部变量表、 操作数栈、 动态链接、 方法出口等信息4、ja " />
    <meta name="baidu-site-verification" content="8ssDkDEucu" />
    
    <link rel="alternative" href="/atom.xml" title="螃蟹以死" type="application/atom+xml" >
    
    
    <link rel="shortcut icon" href="/favicon.ico" >
    
    
<link rel="stylesheet" href="/css/style.css">

    <!--[if lt IE 9]>
    
<script src="/js/html5.js"></script>

    <![endif]-->
    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ab88d36acf7ff63477f8ed578415c246";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


    
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-5475855676583847",
        enable_page_level_ads: true
    });
</script>
    
    
<script src="/js/jquery/jquery-2.2.0.min.js"></script>

    
<script src="/js/qrcode.min.js"></script>

    
<script src="/js/particles.js"></script>

    
<script src="/js/qq/share.js"></script>

<meta name="generator" content="Hexo 8.0.0"></head>

<body class="home">
    <!--[if lt IE 9]>
    <div class="browsehappy">
        当前网页 <strong>不支持</strong>
        你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.
    </div>
    <![endif]-->

    <!-- 背景 -->
    <!--<div id="particles-js" style="position: fixed; width: 100%; height: 100%;" class="bc-grid">-->
    <div style="position: fixed; width: 100%; height: 100%;" class="bc-grid">

    </div>
    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="/">
                <div class="cover">
                    <span class="name">螃蟹以死</span>
                    <span class="description">seekpie</span>
                </div>
            </a>
        </div>
        <div class="dropnav icon-paragraph-justify" id="JELON__btnDropNav"></div>
        <ul class="menu hidden" id="JELON__menu">
            
            <li rel="/2018/06/15/java-gc/index.html" class="item ">
                <a href="/"  title="首页" class="fa fa-home">&nbsp;首页</a>
            </li>
            
            <li rel="/2018/06/15/java-gc/index.html" class="item ">
                <a href="/archives/"  title="归档" class="fa fa-archive">&nbsp;归档</a>
            </li>
            
            <li rel="/2018/06/15/java-gc/index.html" class="item ">
                <a href="/tools/tools.html"  title="工具" class="fa fa-wrench">&nbsp;工具</a>
            </li>
            
            <li rel="/2018/06/15/java-gc/index.html" class="item ">
                <a href="/atom.xml" target="_blank"  title="RSS" class="fa fa-rss">&nbsp;RSS</a>
            </li>
            
            <li class="item search-item"><!-- 搜索遮罩框 -->
<span class="local-search local-search-google local-search-plugin" id="local-search">
  <span><input type="search" placeholder="站内搜索..." id="local-search-input" class="local-search-input-cls" style=""/></span>&nbsp;
  <span class="fa fa-search"></span>
  <div id="local-search-result" class="local-search-result-cls"></div>
</span></li>
        </ul>
        <div class="profile clearfix">
            <div class="qr-site fl"  onmouseover="siteQrMouseOver()" onmouseout="siteQrMouseOut()">
                <div>
                    <div id="site-qr"></div>
                </div>
            </div>
            <div id="site-qr-pop"> </div>
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/Crab2died" target="_blank">GitHub</a>
                        |
                    
                        <a href="https://github.com/seek-pie" target="_blank">Seek Pie</a>
                        |
                    
                        <a href="https://gitee.com/Crab2Died" target="_blank">Gitee</a>
                        
                    
                </p>
                <p class="sns">
                    
                        <a href="http://weibo.com/Crab2Died" class="weibo" target="_blank"><b>■</b> 新浪微博</a>
                    
                        <a href="https://www.zhihu.com/people/crab2died" class="zhihu" target="_blank"><b>■</b> 知 乎</a>
                    
                        <a href="mailto:Crab2Died@126.com" class="email" target="_blank"><b>■</b> E-mail</a>
                    
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="/crab2died.png" alt="avatar" title="Crab2Died" >
            </div>
        </div>
    </section>
</header>


    

  <div class="bulletin">
    <!--<div class="bulletin-icon"><strong style="color: #ebd829; width: 50px"><i class="fa fa-volume-up"></i></strong></div>-->
    <div class="bulletin-content">
      
        <marquee direction="left" behavior="scroll" scrollamount=7 scrolldelay=0 align="bottom" bgcolor="#ffffff" hspace=20 vspace=0
               onmouseover=this.stop() onmouseout=this.start()>
        工具内有很多实用工具，欢迎使用。
      
    </marquee></div>
    <div id="theClock" class="bulletin-clock">

    </div>
  </div>



    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 文章页 -->
<!-- 文章 -->
<article class="post article">
  <header class="text-center">
    <h3 class="post-title"><span>Java GC</span></h3>
  </header>
  <p class="post-meta text-center">
    <i class="fa fa-edit"></i>
    Crab2Died &nbsp;&nbsp;
    <i class="fa fa-calendar"></i>
    <time datetime="2018-06-15T05:15:27.000Z">2018-06-15</time>
    <span id="busuanzi_container_page_pv"> &nbsp;&nbsp; <i class="fa fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span>
  </p>

  <p class="copyright_label">
    <span class="copyright_title">版权声明: </span>
    <span class="copyright_notice">本文著作权归作者所有，转载请注明出处。
      
      <span class="copyright_link">https://www.seekpie.com/2018/06/15/java-gc/</span>
      </span>
  </p>
  <div class="post-content">
    <h2 id="一-Java虚拟机内存区域"><a href="#一-Java虚拟机内存区域" class="headerlink" title="一. Java虚拟机内存区域"></a>一. Java虚拟机内存区域</h2><h3 id="1-运行时数据区"><a href="#1-运行时数据区" class="headerlink" title="1. 运行时数据区"></a>1. 运行时数据区</h3><p>   <img src="/images/java/java_runtime.png" alt="java运行时数据区"></p>
<h3 id="2-程序计数器-Program-Counter-Register"><a href="#2-程序计数器-Program-Counter-Register" class="headerlink" title="2. 程序计数器(Program Counter Register)"></a>2. 程序计数器(Program Counter Register)</h3><ul>
<li>1、程序计数器是线程内(每个线程都有唯一的、封闭的)一小块内存区域</li>
<li>2、计数器指定的是当前虚拟机执行指令的地址</li>
<li>3、当虚拟机执行的是Native方法时,计数器值为空(Undefined),此内存区域是唯一一个在Java虚拟机规范中没有规定任何<code>OutOfMemoryError</code>
   情况的区域.</li>
</ul>
<h3 id="3-Java虚拟机栈-Java-Virtual-Machine-Stacks"><a href="#3-Java虚拟机栈-Java-Virtual-Machine-Stacks" class="headerlink" title="3. Java虚拟机栈(Java Virtual Machine Stacks)"></a>3. Java虚拟机栈(Java Virtual Machine Stacks)</h3><ul>
<li>1、虚拟机栈是线程内部的、封闭的</li>
<li>2、虚拟机栈描述的是java方法执行的内存模型</li>
<li>3、每个方法在执行的同时都会创建一个栈帧(Stack Frame)用于存储局部变量表、 操作数栈、 动态链接、 方法出口等信息</li>
<li>4、java方法的执行就是入栈与出栈的过程</li>
<li>5、如果虚拟机栈深度超出了虚拟机允许深度将会抛出<code>StackOverflowError</code>异常,现代虚拟机大多数支持动态扩展(也允许固定长度),当虚拟机申
   请扩展时申请不到足够的内存时,将会抛出<code>OutOfMemoryError</code>异常</li>
</ul>
<h3 id="4-本地方法栈-Native-Method-Stack"><a href="#4-本地方法栈-Native-Method-Stack" class="headerlink" title="4. 本地方法栈(Native Method Stack)"></a>4. 本地方法栈(Native Method Stack)</h3><ul>
<li>1、为虚拟机调用本地Native方法提供服务</li>
<li>2、也有虚拟机(譬如Sun HotSpot虚拟机)直接就把本地方法栈和虚拟机栈合二为一</li>
<li>3、也会抛出<code>StackOverflowError</code>异常和<code>OutOfMemoryError</code>异常</li>
</ul>
<h3 id="5-Java堆-Java-Heap-GC堆"><a href="#5-Java堆-Java-Heap-GC堆" class="headerlink" title="5. Java堆(Java Heap) GC堆"></a>5. Java堆(Java Heap) GC堆</h3><ul>
<li>1、线程共享的最大一块内存区域</li>
<li>2、此内存区域的唯一目的就是存放对象实例,几乎所有的对象实例都在这里分配内存,虚拟机规范所有的对象实例与数据都在堆上分配</li>
<li>3、随着JIT编译器的发展与逃逸分析技术逐渐成熟,栈上分配、 标量替换优化技术将会导致一些微妙的变化发生,所有的对象都分配在堆上也渐渐
   变得不是那么“绝对”了</li>
</ul>
<h3 id="6-方法区-Method-Area"><a href="#6-方法区-Method-Area" class="headerlink" title="6. 方法区(Method Area)"></a>6. 方法区(Method Area)</h3><ul>
<li>1、存储已被虚拟机加载的类信息、 常量、 静态变量、 即时编译器编译后的代码等数据</li>
<li>2、这区域的内存回收目标主要是针对常量池的回收和对类型的卸载</li>
</ul>
<h3 id="7-运行时常量池-Runtime-Constant-Pool"><a href="#7-运行时常量池-Runtime-Constant-Pool" class="headerlink" title="7. 运行时常量池(Runtime Constant Pool)"></a>7. 运行时常量池(Runtime Constant Pool)</h3><ul>
<li>1、Class文件中除了有类的版本、 字段、 方法、 接口等描述信息外,还有一项信息是常量池(Constant Pool Table),用于存放编译期生成
   的各种字面量和符号引用,这部分内容将在类加载后进入方法区的运行时常量池中存放</li>
<li>2、<code>String.intern()</code>也会放入运行时常量池中</li>
</ul>
<h3 id="8-直接内存-Direct-Memory"><a href="#8-直接内存-Direct-Memory" class="headerlink" title="8. 直接内存(Direct Memory)"></a>8. 直接内存(Direct Memory)</h3><ul>
<li>1、NIO的DirectByteBuffer对象使用直接内存,这样能在一些场景中显著提高性能,因为避免了在Java堆和Native堆中来回复制数据</li>
</ul>
<h2 id="二-Java对象"><a href="#二-Java对象" class="headerlink" title="二. Java对象"></a>二. Java对象</h2><h3 id="1-对象的创建"><a href="#1-对象的创建" class="headerlink" title="1. 对象的创建"></a>1. 对象的创建</h3><ul>
<li>1、指针碰撞(Bump the Pointer)</li>
<li>2、空闲列表(Free List)</li>
</ul>
<h3 id="2-对象再内存中的布局"><a href="#2-对象再内存中的布局" class="headerlink" title="2. 对象再内存中的布局"></a>2. 对象再内存中的布局</h3><ul>
<li>1、分为3块区域:对象头(Header)、实例数据(Instance Data)和对齐填充(Padding)</li>
<li>2、对象头包含:轻量级锁定、 重量级锁定、 GC标记、 可偏向</li>
</ul>
<h3 id="3-对象的访问定位"><a href="#3-对象的访问定位" class="headerlink" title="3. 对象的访问定位"></a>3. 对象的访问定位</h3><ul>
<li>1、句柄访问<br> <img src="/images/java/object_handle_access.png" alt="句柄访问对象"></li>
<li>2、直接指针访问<br> <img src="/images/java/direct_pointer_access.png" alt="直接指针访问"></li>
</ul>
<h2 id="三-垃圾回收与内存分配"><a href="#三-垃圾回收与内存分配" class="headerlink" title="三. 垃圾回收与内存分配"></a>三. 垃圾回收与内存分配</h2><h3 id="1-引用计数法-虚拟机未使用"><a href="#1-引用计数法-虚拟机未使用" class="headerlink" title="1. 引用计数法(虚拟机未使用)"></a>1. 引用计数法(虚拟机未使用)</h3><ul>
<li>1、互相引用将无法得到正常回收</li>
</ul>
<h3 id="2-可达性分析算法-Reachability-Analysis"><a href="#2-可达性分析算法-Reachability-Analysis" class="headerlink" title="2. 可达性分析算法(Reachability Analysis)"></a>2. 可达性分析算法(Reachability Analysis)</h3><ul>
<li>1、通过GC Root节点向下搜索,搜索走过的路径称为引用链(Reference Chain),当一个对象没有一个引用链经过,则表示该对象是不可用的,可以回收</li>
<li>2、可作为GC Root对象的有:   <ul>
<li>虚拟机栈(栈帧中的本地变量表)中引用的对象 </li>
<li>方法区中类静态属性引用的对象  </li>
<li>方法区中常量引用的对象  </li>
<li>本地方法栈中JNI(即一般说的Native方法)引用的对象</li>
</ul>
</li>
</ul>
<h3 id="3-引用"><a href="#3-引用" class="headerlink" title="3. 引用"></a>3. 引用</h3><ul>
<li>1、<strong>强引用(Strong Reference)</strong>: new 关键字</li>
<li>2、<strong>软引用(Soft Reference)</strong>:当要发生内存溢出时会将软引用对象加入回收队列中</li>
<li>3、<strong>弱引用(Weak Reference)</strong>:只能活到下次GC前</li>
<li>4、<strong>虚引用(Phantom Reference)</strong>:幽灵引用或者幻影引用</li>
</ul>
<h3 id="4-回收方法区"><a href="#4-回收方法区" class="headerlink" title="4. 回收方法区"></a>4. 回收方法区</h3><ul>
<li>1、主要回收永久代的废弃的常量和无用的类   </li>
<li>2、无用的类判定条件:  <ul>
<li>该类所有的实例都已经被回收,也就是Java堆中不存在该类的任何实例.</li>
<li>加载该类的ClassLoader已经被回收.</li>
<li>该类对应的<code>java.lang.Class</code>对象没有在任何地方被引用,无法在任何地方通过反射访问该类的方法.</li>
</ul>
</li>
</ul>
<h2 id="四-垃圾回收算法"><a href="#四-垃圾回收算法" class="headerlink" title="四. 垃圾回收算法"></a>四. 垃圾回收算法</h2><h3 id="1-标记-清除算法-Mark-Sweep"><a href="#1-标记-清除算法-Mark-Sweep" class="headerlink" title="1. 标记-清除算法(Mark-Sweep)"></a>1. 标记-清除算法(Mark-Sweep)</h3><ul>
<li>1、标记与清除2个过程</li>
<li>2、标记与清除效率都不高,还可能产生大量空间碎片导致大对象找不到连续可用的空间</li>
</ul>
<h3 id="2-复制算法-Copying"><a href="#2-复制算法-Copying" class="headerlink" title="2. 复制算法(Copying)"></a>2. 复制算法(Copying)</h3><ul>
<li>1、将堆内存分为大小相等的2块,每次只是用其中一块,当一块内存用完时将还活着的对象移动到另一块,然后清理该块内存</li>
<li>2、消除了内存碎片化,代价是牺牲了一半可用堆内存</li>
<li>3、商用虚拟机都采用这种,但并不是按1:1来划分空间而是将内存分为一块较大的Eden空间和两块较小的Survivor空间,每次使用Eden和其中
   一块Survivor.当回收时,将Eden和Survivor中还存活着的对象一次性地复制到另外一块Survivor空间上,最后清理掉Eden和刚才用过的
   Survivor空间. HotSpot虚拟机默认Eden和Survivor的大小比例是8:1,也就是每次新生代中可用内存空间为整个新生代容量的
   90%(80%+10%),只有10%的内存会被“浪费”. 当然,98%的对象可回收只是一般场景下的数据,我们没有办法保证每次回收都只有不多于
   10%的对象存活,当Survivor空间不够用时,需要依赖其他内存(这里指老年代)进行分配担保(Handle Promotion).</li>
<li>4、当存活率高时将会出现大量的内存复制操作还有可能导致进行分配担保</li>
</ul>
<h3 id="3-标记-整理算法-Mark-Compact"><a href="#3-标记-整理算法-Mark-Compact" class="headerlink" title="3. 标记-整理算法(Mark-Compact)"></a>3. 标记-整理算法(Mark-Compact)</h3><ul>
<li>1、老年代内存,标记可回收对象之后,将存活的对象移向一端,然后清理掉端边界以外的内存</li>
</ul>
<h3 id="4-分代收集算法-Generational-Collection"><a href="#4-分代收集算法-Generational-Collection" class="headerlink" title="4. 分代收集算法(Generational Collection)"></a>4. 分代收集算法(Generational Collection)</h3><ul>
<li>1、将堆内存分为老年代和新生代</li>
<li>2、老年代对象存活率高,再采用标记-清理或标记-整理算法进行GC</li>
<li>3、新生代存活率低,采用复制算法将少量的存活对象进行复制操作</li>
</ul>
<h2 id="五-HotSpot算法实现"><a href="#五-HotSpot算法实现" class="headerlink" title="五. HotSpot算法实现"></a>五. HotSpot算法实现</h2><h3 id="1-枚举根节点"><a href="#1-枚举根节点" class="headerlink" title="1. 枚举根节点"></a>1. 枚举根节点</h3><p>   - 1、虚拟机内OopMap存有对象引用信息，可以得到GC Root根节点</p>
<h3 id="2-安全点"><a href="#2-安全点" class="headerlink" title="2. 安全点"></a>2. 安全点</h3><ul>
<li>1、虚拟机会在如方法调用、 循环跳转、 异常跳转等，所以具有这些功能的指令才会产生Safepoint</li>
<li>2、中断方式  <ul>
<li>抢先式中断(基本弃用): 给出中断指令，有线程发现未到达安全点则继续执行至下一个安全点</li>
<li>主动式中断: 给定一个中断标志，每个线程都会去轮询该标志，为真时中断</li>
</ul>
</li>
</ul>
<h3 id="3-安全区域"><a href="#3-安全区域" class="headerlink" title="3. 安全区域"></a>3. 安全区域</h3><ul>
<li>1、安全区域是指在一段代码片段之中，引用关系不会发生变化。 在这个区域中的任意地方开始GC都是安全的</li>
<li>2、在线程执行到安全区域时首先会标记自己进入安全区域，出安全区域前必须等到枚举根节点或整个GC完成，没有则都等到可以出安全区域信号为止</li>
</ul>
<h2 id="六-垃圾回收器"><a href="#六-垃圾回收器" class="headerlink" title="六. 垃圾回收器"></a>六. 垃圾回收器</h2><p>   <img src="/images/java/hotspot_gc.png" alt="HotSpot虚拟机垃圾回收器"></p>
<h3 id="1-Serial收集器"><a href="#1-Serial收集器" class="headerlink" title="1. Serial收集器"></a>1. Serial收集器</h3><ul>
<li>1、JDK1.3.1之前是虚拟机新生代收集的唯一选择</li>
<li>2、单线程、Stop The World(STW)、复制算法</li>
<li>3、Client模式下新生代默认的垃圾收集器</li>
</ul>
<h3 id="2-PerNew收集器"><a href="#2-PerNew收集器" class="headerlink" title="2. PerNew收集器"></a>2. PerNew收集器</h3><ul>
<li>1、Serial收集器的多线程版,其他一样</li>
<li>2、是许多虚拟机Server模式下新生代的首选收集器</li>
<li>3、ParNew收集器也是使用<code>-XX:+UseConcMarkSweepGC</code>选项后的默认新生代收集器,也可以使用<code>-XX:+UseParNewGC</code>选项来强制指定它</li>
<li>4、单核下效果不一定比Serial效果好,多核更适合,<code>-XX:ParallelGCThreads</code>参数来限制垃圾收集的线程数</li>
</ul>
<h3 id="3-Parallel-Scavenge收集器"><a href="#3-Parallel-Scavenge收集器" class="headerlink" title="3. Parallel Scavenge收集器"></a>3. Parallel Scavenge收集器</h3><ul>
<li>1、新生代收集器,采用复制算法,并行的多线程收集器,吞吐量优先   </li>
<li>2、追求可控的吞吐量, 吞吐量&#x3D;运行用户代码时间&#x2F;(运行用户代码时间+垃圾收集时间)</li>
<li>3、控制最大垃圾收集停顿时间的<code>-XX:MaxGCPauseMillis</code>参数以及直接设置吞吐量大小的<code>-XX:GCTimeRatio</code>参数.</li>
</ul>
<h3 id="4-Serial-Old收集器"><a href="#4-Serial-Old收集器" class="headerlink" title="4. Serial Old收集器"></a>4. Serial Old收集器</h3><ul>
<li>1、Serial老年代版本、单线程、标记-整理算法</li>
<li>2、给Client模式下虚拟机用</li>
</ul>
<h3 id="5-Parallel-Old收集器"><a href="#5-Parallel-Old收集器" class="headerlink" title="5. Parallel Old收集器"></a>5. Parallel Old收集器</h3><ul>
<li>1、Parallel Scavenge收集器的老年代版本,使用多线程和“标记-整理”算法,JDK1.6开始提供</li>
</ul>
<h3 id="6-CMS收集器"><a href="#6-CMS收集器" class="headerlink" title="6. CMS收集器"></a>6. CMS收集器</h3><ul>
<li>1、CMS(Concurrent Mark Sweep)收集器是一种以获取最短回收停顿时间为目标的收集器. </li>
<li>2、标记-清除算法实现  <ul>
<li>初始标记(CMS initial mark)，有短时的STW</li>
<li>并发标记(CMS concurrent mark)</li>
<li>重新标记(CMS remark)，有短时的STW</li>
<li>并发清除(CMS concurrent sweep)</li>
</ul>
</li>
<li>3、并发收集、 低停顿,Sun公司的一些官方文档中也称之为并发低停顿收集器</li>
<li>4、<code>-XX：+UseCMSCompactAtFullCollection</code>默认开启，表示CMS进行Full GC的时候开启内存碎片的合并整理，该过程无法并发停顿时间变长</li>
<li>5、<code>-XX：CMSFullGCsBeforeCompaction</code>表示执行多少次不压缩的Full GC后跟着来一次压缩的Full GC，默认是0，每次都压缩</li>
</ul>
<h3 id="7-G1收集器"><a href="#7-G1收集器" class="headerlink" title="7. G1收集器"></a>7. G1收集器</h3><ul>
<li>1、G1(Garbage-First)收集器是当今收集器技术发展的最前沿成果之一,面向服务端应用 </li>
<li>2、特点: <ul>
<li>并发与并行:充分利用cpu与多核等硬件优势</li>
<li>分代收集:</li>
<li>空间整理:标记-整理算法</li>
<li>可预测的停顿:将堆内存分为多个区域(Region),还保留有老年代与新生代</li>
</ul>
</li>
<li>3、不计算维护Remembered Set的操作,G1收集器的运作大致可划分为以下几个步骤:  <ul>
<li>初始标记(Initial Marking)</li>
<li>并发标记(Concurrent Marking)</li>
<li>最终标记(Final Marking)</li>
<li>筛选回收(Live Data Counting and Evacuation)</li>
</ul>
</li>
</ul>
<h3 id="8-垃圾收集器参数"><a href="#8-垃圾收集器参数" class="headerlink" title="8. 垃圾收集器参数"></a>8. 垃圾收集器参数</h3><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">UseSerialGC</td>
<td align="left">Client模式下默认,使用Serial+Serial Old组合</td>
</tr>
<tr>
<td align="left">UseParNewGC</td>
<td align="left">ParNew+Serial Old组合</td>
</tr>
<tr>
<td align="left">UseConMarkSweepGC</td>
<td align="left">ParNew+CMS+Serial Old组合,Serial Old作为CMS失败后备用</td>
</tr>
<tr>
<td align="left">UseParallelGC</td>
<td align="left">Server模式默认,Parallel Scavenge+Serial Old(PS Mark Sweep)组合</td>
</tr>
<tr>
<td align="left">UseParallelOldGC</td>
<td align="left">Parallel Scavenge+Parallel Old组合</td>
</tr>
<tr>
<td align="left">UseG1GC</td>
<td align="left">使用G1</td>
</tr>
</tbody></table>
<h2 id="七-内存分配与回收策略"><a href="#七-内存分配与回收策略" class="headerlink" title="七. 内存分配与回收策略"></a>七. 内存分配与回收策略</h2><h3 id="1-对象优先在Eden分配"><a href="#1-对象优先在Eden分配" class="headerlink" title="1. 对象优先在Eden分配"></a>1. 对象优先在Eden分配</h3><ul>
<li>对象优先在Eden新生代分配,内存不足将发生一次Minor GC</li>
</ul>
<h3 id="2-大对象直接进入老年代"><a href="#2-大对象直接进入老年代" class="headerlink" title="2. 大对象直接进入老年代"></a>2. 大对象直接进入老年代</h3><ul>
<li><code>-XX:PretenureSizeThreshold</code>参数,令大于这个设置值的对象直接在老年代分配,避免大量内存复制</li>
</ul>
<h3 id="3-长期存活的对象将进入老年代"><a href="#3-长期存活的对象将进入老年代" class="headerlink" title="3. 长期存活的对象将进入老年代"></a>3. 长期存活的对象将进入老年代</h3><ul>
<li>对象晋升老年代的年龄阈值,可以通过参数<code>-XX:MaxTenuringThreshold</code>设置,默认15,每次Minor GC对象没死+1</li>
</ul>
<h3 id="4-动态对象年龄判定"><a href="#4-动态对象年龄判定" class="headerlink" title="4. 动态对象年龄判定"></a>4. 动态对象年龄判定</h3><ul>
<li>如果在Survivor空间中相同年龄所有对象大小的总和大于Survivor空间的一半,年龄大于或等于该年龄的对象就可以直接进入老年代,无须等
到MaxTenuringThreshold中要求的年龄</li>
</ul>
<h3 id="5-空间分配担保"><a href="#5-空间分配担保" class="headerlink" title="5. 空间分配担保"></a>5. 空间分配担保</h3><ul>
<li>Minor GC前先判断老年代可用空间是否大于新生代对象总空间,如果大于则确保安全,如果小于则查看HandlePromotionFailure设置的值是否
允许担保失败,若允许则会继续检查老年代最大可用的连续空间是否大于历次晋升到老年代对象的平均大小,如果大于,将尝试着进行一次Minor 
GC,尽管这次Minor GC是有风险的;如果小于,或者HandlePromotionFailure设置不允许冒险,那这时也要改为进行一次Full GC.</li>
</ul>
<h2 id="八-Minor-GC、Major-GC与Full-GC"><a href="#八-Minor-GC、Major-GC与Full-GC" class="headerlink" title="八. Minor GC、Major GC与Full GC"></a>八. Minor GC、Major GC与Full GC</h2><ul>
<li>Minor GC表示新生代GC、Major GC是指老年代GC、Full GC为全部堆内存GC。</li>
<li>往往他们之间相互影响，相互触发</li>
</ul>

  </div>

  <!-- 目录 -->
  <div class="catalog">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F"><span class="toc-text">一. Java虚拟机内存区域</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA"><span class="toc-text">1. 运行时数据区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8-Program-Counter-Register"><span class="toc-text">2. 程序计数器(Program Counter Register)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88-Java-Virtual-Machine-Stacks"><span class="toc-text">3. Java虚拟机栈(Java Virtual Machine Stacks)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88-Native-Method-Stack"><span class="toc-text">4. 本地方法栈(Native Method Stack)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Java%E5%A0%86-Java-Heap-GC%E5%A0%86"><span class="toc-text">5. Java堆(Java Heap) GC堆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%96%B9%E6%B3%95%E5%8C%BA-Method-Area"><span class="toc-text">6. 方法区(Method Area)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0-Runtime-Constant-Pool"><span class="toc-text">7. 运行时常量池(Runtime Constant Pool)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98-Direct-Memory"><span class="toc-text">8. 直接内存(Direct Memory)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-Java%E5%AF%B9%E8%B1%A1"><span class="toc-text">二. Java对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-text">1. 对象的创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AF%B9%E8%B1%A1%E5%86%8D%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%B8%83%E5%B1%80"><span class="toc-text">2. 对象再内存中的布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AE%BF%E9%97%AE%E5%AE%9A%E4%BD%8D"><span class="toc-text">3. 对象的访问定位</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%B8%8E%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D"><span class="toc-text">三. 垃圾回收与内存分配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E6%B3%95-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9C%AA%E4%BD%BF%E7%94%A8"><span class="toc-text">1. 引用计数法(虚拟机未使用)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%AF%E8%BE%BE%E6%80%A7%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95-Reachability-Analysis"><span class="toc-text">2. 可达性分析算法(Reachability Analysis)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BC%95%E7%94%A8"><span class="toc-text">3. 引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%9B%9E%E6%94%B6%E6%96%B9%E6%B3%95%E5%8C%BA"><span class="toc-text">4. 回收方法区</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95"><span class="toc-text">四. 垃圾回收算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A0%87%E8%AE%B0-%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95-Mark-Sweep"><span class="toc-text">1. 标记-清除算法(Mark-Sweep)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95-Copying"><span class="toc-text">2. 复制算法(Copying)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A0%87%E8%AE%B0-%E6%95%B4%E7%90%86%E7%AE%97%E6%B3%95-Mark-Compact"><span class="toc-text">3. 标记-整理算法(Mark-Compact)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%86%E4%BB%A3%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95-Generational-Collection"><span class="toc-text">4. 分代收集算法(Generational Collection)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-HotSpot%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0"><span class="toc-text">五. HotSpot算法实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9E%9A%E4%B8%BE%E6%A0%B9%E8%8A%82%E7%82%B9"><span class="toc-text">1. 枚举根节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E5%85%A8%E7%82%B9"><span class="toc-text">2. 安全点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F"><span class="toc-text">3. 安全区域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8"><span class="toc-text">六. 垃圾回收器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Serial%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-text">1. Serial收集器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-PerNew%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-text">2. PerNew收集器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Parallel-Scavenge%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-text">3. Parallel Scavenge收集器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Serial-Old%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-text">4. Serial Old收集器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Parallel-Old%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-text">5. Parallel Old收集器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-CMS%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-text">6. CMS收集器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-G1%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-text">7. G1收集器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E5%8F%82%E6%95%B0"><span class="toc-text">8. 垃圾收集器参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6%E7%AD%96%E7%95%A5"><span class="toc-text">七. 内存分配与回收策略</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%85%88%E5%9C%A8Eden%E5%88%86%E9%85%8D"><span class="toc-text">1. 对象优先在Eden分配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%A7%E5%AF%B9%E8%B1%A1%E7%9B%B4%E6%8E%A5%E8%BF%9B%E5%85%A5%E8%80%81%E5%B9%B4%E4%BB%A3"><span class="toc-text">2. 大对象直接进入老年代</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%95%BF%E6%9C%9F%E5%AD%98%E6%B4%BB%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%B0%86%E8%BF%9B%E5%85%A5%E8%80%81%E5%B9%B4%E4%BB%A3"><span class="toc-text">3. 长期存活的对象将进入老年代</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8A%A8%E6%80%81%E5%AF%B9%E8%B1%A1%E5%B9%B4%E9%BE%84%E5%88%A4%E5%AE%9A"><span class="toc-text">4. 动态对象年龄判定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%A9%BA%E9%97%B4%E5%88%86%E9%85%8D%E6%8B%85%E4%BF%9D"><span class="toc-text">5. 空间分配担保</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB-Minor-GC%E3%80%81Major-GC%E4%B8%8EFull-GC"><span class="toc-text">八. Minor GC、Major GC与Full GC</span></a></li></ol>
  </div>

  <p class="post-meta">
        <span class="post-cat">分类：
          <a class="cat-link" href="/categories/Java/">Java</a>
        </span>
    <span class="post-tags">
            标签：
      
    
        <a href="/tags/Java/" title="Java" class="post-tag">Java</a> | 
    
        <a href="/tags/JVM/" title="JVM" class="post-tag">JVM</a> | 
    
        <a href="/tags/GC/" title="GC" class="post-tag">GC</a>
    

        </span>
  </p>
</article>
<!-- 分享按钮 -->

  <div class="article-share clearfix text-center">
    <div class="share-area">
      <span class="share-txt">分享到：</span>
      <a href="javascript: window.open('http://service.weibo.com/share/share.php?url=' + encodeURIComponent(location.href.split('#')[0]) + '&title=' + document.title + '&pic=https://www.seekpie.com/images/java/java_runtime.png&language=zh_cn');"
         class="share-icon weibo"></a>
      <a href="javascript: wechatShare('wechat-show', window.location.href.split('#')[0])" class="share-icon wechat"></a>
      <a href="javascript: window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=' + encodeURIComponent(location.href.split('#')[0]) + '&title=' + document.title);"
         class="share-icon qqzone"></a>
      <a href="javascript: window.open('http://connect.qq.com/widget/shareqq/index.html?url=' + encodeURIComponent(location.href.split('#')[0]) + '&title=' + encodeURIComponent(document.title) +'&desc=' + encodeURIComponent('一. Java虚拟机内存区域1. 运行时数据区   
2. 程序计数器(Program Counter Register)
1、程序计数器是线程内(每个线程都有唯一的、封闭的)一小块内存区域
2、计数器指定的是当前虚拟机执行指令的地址
3、当虚拟机执行的是Native方法时,计数器值为空(Undef') + '&pics=https://www.seekpie.com/images/java/java_runtime.png');"
         class="share-icon qq"></a>
      <a href="javascript: window.open('http://shuo.douban.com/!service/share?href=' + encodeURIComponent(location.href.split('#')[0]) + '&name=' + document.title + '&text=' + document.title);"
         class="share-icon douban"></a>
    </div>
  </div>
  <div class="wechat-show">
    <div class="wx-header"><span>分享到微信朋友圈</span><a class="wx-close" onclick="closeShare('wechat-show')">×</a></div>
    <div id="wechat-share" style="margin: 10px"></div>
    <div class="wx-footer">打开微信，使用“扫一扫”即可将网页分享至朋友圈。</div>
  </div>


<!-- 上一篇/下一篇 -->

<div class="article-nav clearfix">
    
    <span class="prev fl">
        上一篇<br >
        <a href="/2018/06/15/java-collection-frame/">
            
                Java Collection Frame
            
        </a>
    </span>
    

    
    <span class="next fr">
        下一篇<br >
        <a href="/2018/06/15/java-concurrent/">
            
                Java Concurrent
            
        </a>
    </span>
    
</div>

<!-- 文章评论 -->


  <div id="comments" class="comments">
  </div>

  
    
<script src="/js/comment.js"></script>

    <script>
        JELON.Comment({
            container: 'comments',
            label: 'java-gc' || '2018/06/15/java-gc/',
            owner: 'Crab2Died',
            repo: 'blog-comments',
            clientId: '2117b548bf34c40984be',
            clientSecret: '2642328e6056dbf7b02951961e5ca481406410ed'
        });
    </script>
  


            </div>
        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">

    
    <section class="widget toc-widget">
      <h3 class="widget-hd"><strong>文章目录</strong></h3>
      <!-- 目录 -->
      <div class="toc">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%B8%80-Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F"><span class="post-toc-text">一. Java虚拟机内存区域</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA"><span class="post-toc-text">1. 运行时数据区</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8-Program-Counter-Register"><span class="post-toc-text">2. 程序计数器(Program Counter Register)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88-Java-Virtual-Machine-Stacks"><span class="post-toc-text">3. Java虚拟机栈(Java Virtual Machine Stacks)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88-Native-Method-Stack"><span class="post-toc-text">4. 本地方法栈(Native Method Stack)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-Java%E5%A0%86-Java-Heap-GC%E5%A0%86"><span class="post-toc-text">5. Java堆(Java Heap) GC堆</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-%E6%96%B9%E6%B3%95%E5%8C%BA-Method-Area"><span class="post-toc-text">6. 方法区(Method Area)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B8%B8%E9%87%8F%E6%B1%A0-Runtime-Constant-Pool"><span class="post-toc-text">7. 运行时常量池(Runtime Constant Pool)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98-Direct-Memory"><span class="post-toc-text">8. 直接内存(Direct Memory)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%BA%8C-Java%E5%AF%B9%E8%B1%A1"><span class="post-toc-text">二. Java对象</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="post-toc-text">1. 对象的创建</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-%E5%AF%B9%E8%B1%A1%E5%86%8D%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%B8%83%E5%B1%80"><span class="post-toc-text">2. 对象再内存中的布局</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AE%BF%E9%97%AE%E5%AE%9A%E4%BD%8D"><span class="post-toc-text">3. 对象的访问定位</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%B8%89-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E4%B8%8E%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D"><span class="post-toc-text">三. 垃圾回收与内存分配</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E6%B3%95-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9C%AA%E4%BD%BF%E7%94%A8"><span class="post-toc-text">1. 引用计数法(虚拟机未使用)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-%E5%8F%AF%E8%BE%BE%E6%80%A7%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95-Reachability-Analysis"><span class="post-toc-text">2. 可达性分析算法(Reachability Analysis)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-%E5%BC%95%E7%94%A8"><span class="post-toc-text">3. 引用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-%E5%9B%9E%E6%94%B6%E6%96%B9%E6%B3%95%E5%8C%BA"><span class="post-toc-text">4. 回收方法区</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%9B%9B-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95"><span class="post-toc-text">四. 垃圾回收算法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-%E6%A0%87%E8%AE%B0-%E6%B8%85%E9%99%A4%E7%AE%97%E6%B3%95-Mark-Sweep"><span class="post-toc-text">1. 标记-清除算法(Mark-Sweep)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-%E5%A4%8D%E5%88%B6%E7%AE%97%E6%B3%95-Copying"><span class="post-toc-text">2. 复制算法(Copying)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-%E6%A0%87%E8%AE%B0-%E6%95%B4%E7%90%86%E7%AE%97%E6%B3%95-Mark-Compact"><span class="post-toc-text">3. 标记-整理算法(Mark-Compact)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-%E5%88%86%E4%BB%A3%E6%94%B6%E9%9B%86%E7%AE%97%E6%B3%95-Generational-Collection"><span class="post-toc-text">4. 分代收集算法(Generational Collection)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%BA%94-HotSpot%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0"><span class="post-toc-text">五. HotSpot算法实现</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-%E6%9E%9A%E4%B8%BE%E6%A0%B9%E8%8A%82%E7%82%B9"><span class="post-toc-text">1. 枚举根节点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-%E5%AE%89%E5%85%A8%E7%82%B9"><span class="post-toc-text">2. 安全点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F"><span class="post-toc-text">3. 安全区域</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%85%AD-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8"><span class="post-toc-text">六. 垃圾回收器</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-Serial%E6%94%B6%E9%9B%86%E5%99%A8"><span class="post-toc-text">1. Serial收集器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-PerNew%E6%94%B6%E9%9B%86%E5%99%A8"><span class="post-toc-text">2. PerNew收集器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-Parallel-Scavenge%E6%94%B6%E9%9B%86%E5%99%A8"><span class="post-toc-text">3. Parallel Scavenge收集器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-Serial-Old%E6%94%B6%E9%9B%86%E5%99%A8"><span class="post-toc-text">4. Serial Old收集器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-Parallel-Old%E6%94%B6%E9%9B%86%E5%99%A8"><span class="post-toc-text">5. Parallel Old收集器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-CMS%E6%94%B6%E9%9B%86%E5%99%A8"><span class="post-toc-text">6. CMS收集器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-G1%E6%94%B6%E9%9B%86%E5%99%A8"><span class="post-toc-text">7. G1收集器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8%E5%8F%82%E6%95%B0"><span class="post-toc-text">8. 垃圾收集器参数</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%B8%83-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6%E7%AD%96%E7%95%A5"><span class="post-toc-text">七. 内存分配与回收策略</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%85%88%E5%9C%A8Eden%E5%88%86%E9%85%8D"><span class="post-toc-text">1. 对象优先在Eden分配</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-%E5%A4%A7%E5%AF%B9%E8%B1%A1%E7%9B%B4%E6%8E%A5%E8%BF%9B%E5%85%A5%E8%80%81%E5%B9%B4%E4%BB%A3"><span class="post-toc-text">2. 大对象直接进入老年代</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-%E9%95%BF%E6%9C%9F%E5%AD%98%E6%B4%BB%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%B0%86%E8%BF%9B%E5%85%A5%E8%80%81%E5%B9%B4%E4%BB%A3"><span class="post-toc-text">3. 长期存活的对象将进入老年代</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-%E5%8A%A8%E6%80%81%E5%AF%B9%E8%B1%A1%E5%B9%B4%E9%BE%84%E5%88%A4%E5%AE%9A"><span class="post-toc-text">4. 动态对象年龄判定</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-%E7%A9%BA%E9%97%B4%E5%88%86%E9%85%8D%E6%8B%85%E4%BF%9D"><span class="post-toc-text">5. 空间分配担保</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%85%AB-Minor-GC%E3%80%81Major-GC%E4%B8%8EFull-GC"><span class="post-toc-text">八. Minor GC、Major GC与Full GC</span></a></li></ol>
      </div>
    </section>
    

    

    <section class="widget">
        <h3 class="widget-hd"><strong>热门分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
  
    <li title="Java">
      <span class="badge">(8)</span>
      <a href="/categories/Java/">Java</a>
    </li>
  
    <li title="Big Data">
      <span class="badge">(2)</span>
      <a href="/categories/Big-Data/">Big Data</a>
    </li>
  
    <li title="Excel4J">
      <span class="badge">(1)</span>
      <a href="/categories/Excel4J/">Excel4J</a>
    </li>
  
    <li title="Database">
      <span class="badge">(1)</span>
      <a href="/categories/Database/">Database</a>
    </li>
  
    <li title="Elasticsearch">
      <span class="badge">(1)</span>
      <a href="/categories/Elasticsearch/">Elasticsearch</a>
    </li>
  
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item-link" href="/tags/Java/" title="Java 10篇">
      Java(10)
    </a>
  
    <a class="tag-item-link" href="/tags/JVM/" title="JVM 3篇">
      JVM(3)
    </a>
  
    <a class="tag-item-link" href="/tags/Big-Data/" title="Big Data 2篇">
      Big Data(2)
    </a>
  
    <a class="tag-item-link" href="/tags/Excel4J/" title="Excel4J 1篇">
      Excel4J(1)
    </a>
  
    <a class="tag-item-link" href="/tags/Database/" title="Database 1篇">
      Database(1)
    </a>
  
    <a class="tag-item-link" href="/tags/Elasticsearch/" title="Elasticsearch 1篇">
      Elasticsearch(1)
    </a>
  
    <a class="tag-item-link" href="/tags/Interview/" title="Interview 1篇">
      Interview(1)
    </a>
  
    <a class="tag-item-link" href="/tags/Classloader/" title="Classloader 1篇">
      Classloader(1)
    </a>
  
    <a class="tag-item-link" href="/tags/Collection/" title="Collection 1篇">
      Collection(1)
    </a>
  
    <a class="tag-item-link" href="/tags/JIT/" title="JIT 1篇">
      JIT(1)
    </a>
  
    <a class="tag-item-link" href="/tags/Optimize/" title="Optimize 1篇">
      Optimize(1)
    </a>
  
    <a class="tag-item-link" href="/tags/Concurrent/" title="Concurrent 1篇">
      Concurrent(1)
    </a>
  
    <a class="tag-item-link" href="/tags/GC/" title="GC 1篇">
      GC(1)
    </a>
  
    <a class="tag-item-link" href="/tags/JMM/" title="JMM 1篇">
      JMM(1)
    </a>
  
    <a class="tag-item-link" href="/tags/Java-Monitor/" title="Java Monitor 1篇">
      Java Monitor(1)
    </a>
  
</div>
    </section>
    

    

    

    

    
    <!-- 实用工具 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>实用工具</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="/tools/scientific-calculator.html" target="_blank" title="🧮科学计算器">🧮科学计算器</a>
        </li>
    
        <li>
            <a href="/tools/time-converter.html" target="_blank" title="⏰时间转换工具">⏰时间转换工具</a>
        </li>
    
        <li>
            <a href="/tools/exchange-rate.html" target="_blank" title="💱汇率转换工具">💱汇率转换工具</a>
        </li>
    
        <li>
            <a href="/tools/loan-calculator.html" target="_blank" title="🏦贷款计算器">🏦贷款计算器</a>
        </li>
    
        <li>
            <a href="/tools/tax-calculator.html" target="_blank" title="💰个税计算器">💰个税计算器</a>
        </li>
    
        <li>
            <a href="/tools/number-converter.html" target="_blank" title="🔢进制转换工具">🔢进制转换工具</a>
        </li>
    
        <li>
            <a href="/tools/encoder-decoder.html" target="_blank" title="🔐编解码工具">🔐编解码工具</a>
        </li>
    
        <li>
            <a href="/tools/crypto-tool.html" target="_blank" title="🔒加解密工具">🔒加解密工具</a>
        </li>
    
        <li>
            <a href="/tools/unit-converter.html" target="_blank" title="📏单位转换工具">📏单位转换工具</a>
        </li>
    
        <li>
            <a href="/tools/regex-tool.html" target="_blank" title="🔍正则表达式工具">🔍正则表达式工具</a>
        </li>
    
        <li>
            <a href="/tools/cron-tool.html" target="_blank" title="⏰Cron表达式生成工具">⏰Cron表达式生成工具</a>
        </li>
    
        <li>
            <a href="/tools/compression-tool.html" target="_blank" title="📦解压缩工具">📦解压缩工具</a>
        </li>
    
        <li>
            <a href="/tools/formatter-tool.html" target="_blank" title="✨代码格式化工具">✨代码格式化工具</a>
        </li>
    
        <li>
            <a href="/tools/csv-tool.html" target="_blank" title="📊CSV展示工具">📊CSV展示工具</a>
        </li>
    
        <li>
            <a href="/tools/json-array-tool.html" target="_blank" title="📋JSON数组展示工具">📋JSON数组展示工具</a>
        </li>
    
</ul>
    </section>
    

    

</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">

  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">总浏览量<span id="busuanzi_value_site_pv"></span>次</span>
  <br>
    Copyright &copy;
    
        2017 - 2025
    

    <a href="https://github.com/Crab2died" target="_blank"> Crab2Died </a>
    All Rights Reserved.

</footer>
<div class="back-to-top" id="JELON__backToTop" title="返回顶部">返回顶部</div>

    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->

<script src="/js/main.js"></script>


</body>
</html>