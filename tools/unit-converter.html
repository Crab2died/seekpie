<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•ä½è½¬æ¢å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .unit-type-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .unit-type-tab {
            flex: 1;
            min-width: 150px;
            padding: 15px 20px;
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .unit-type-tab:hover {
            border-color: #4facfe;
            background: #ffffff;
        }

        .unit-type-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .converter-content {
            display: none;
        }

        .converter-content.active {
            display: block;
        }

        .converter-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .conversion-grid {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
        }

        .unit-box {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .unit-box label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .unit-box select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            background: white;
        }

        .unit-box select:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .unit-box input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .unit-box input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .swap-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .swap-btn:hover {
            transform: rotate(180deg) scale(1.1);
        }

        .result-info {
            background: #e3f2fd;
            border-left: 4px solid #4facfe;
            padding: 15px 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 0.95em;
            color: #1976d2;
        }

        .history-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin-top: 30px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .history-header h3 {
            color: #333;
            font-size: 1.3em;
        }

        .history-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .history-btn:hover {
            background: #138496;
            transform: translateY(-1px);
        }

        .history-btn.danger {
            background: #dc3545;
        }

        .history-btn.danger:hover {
            background: #c82333;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            background: white;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            border-color: #4facfe;
            box-shadow: 0 2px 8px rgba(79, 172, 254, 0.1);
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .history-item-title {
            font-weight: 600;
            color: #333;
            font-size: 1em;
        }

        .history-item-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-item-date {
            color: #666;
            font-size: 0.85em;
        }

        .delete-history-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
            opacity: 0.7;
        }

        .delete-history-btn:hover {
            background: #c82333;
            opacity: 1;
            transform: scale(1.05);
        }

        .history-item-content {
            color: #555;
            font-size: 0.95em;
        }

        .empty-history {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .content {
                padding: 20px 15px;
            }

            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.8em;
                margin-bottom: 8px;
            }

            .header p {
                font-size: 0.95em;
            }

            .unit-type-tabs {
                flex-direction: column;
            }

            .unit-type-tab {
                width: 100%;
                padding: 12px 16px;
            }

            .conversion-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .swap-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
                margin: 0 auto;
                transform: rotate(90deg);
            }

            .swap-btn:hover {
                transform: rotate(270deg) scale(1.1);
            }

            .converter-box {
                padding: 20px 15px;
            }

            .unit-box {
                padding: 15px;
            }

            .history-section {
                padding: 20px 15px;
            }

            .history-header {
                flex-direction: column;
                gap: 12px;
                align-items: stretch;
            }

            .history-header h3 {
                font-size: 1.2em;
                text-align: center;
            }

            .history-header div {
                display: flex;
                justify-content: center;
                gap: 10px;
            }

            .history-btn {
                flex: 1;
                max-width: 150px;
            }

            .history-item {
                padding: 12px;
            }

            .history-item-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .history-item-actions {
                width: 100%;
                justify-content: space-between;
            }
        }

        /* å°å±æ‰‹æœºä¼˜åŒ– */
        @media (max-width: 480px) {
            body {
                padding: 8px;
            }

            .content {
                padding: 15px 12px;
            }

            .header {
                padding: 15px 12px;
            }

            .header h1 {
                font-size: 1.5em;
            }

            .header p {
                font-size: 0.9em;
            }

            .unit-type-tab {
                padding: 10px 12px;
                font-size: 0.95em;
            }

            .converter-box {
                padding: 15px 12px;
            }

            .unit-box {
                padding: 12px;
            }

            .unit-box label {
                font-size: 0.95em;
            }

            .unit-box input, .unit-box select {
                padding: 10px 12px;
                font-size: 1em;
            }

            .history-section {
                padding: 15px 12px;
            }

            .history-header h3 {
                font-size: 1.1em;
            }

            .history-item {
                padding: 10px;
            }

            .history-item-title {
                font-size: 0.95em;
            }

            .history-item-content {
                font-size: 0.9em;
            }
        }

        /* è¶…å°å±æ‰‹æœº */
        @media (max-width: 360px) {
            .header h1 {
                font-size: 1.3em;
            }

            .header p {
                font-size: 0.85em;
            }

            .unit-type-tab {
                font-size: 0.9em;
            }

            .unit-box input, .unit-box select {
                font-size: 0.95em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ å•ä½è½¬æ¢å·¥å…·</h1>
            <p>æ”¯æŒé•¿åº¦ã€é‡é‡ã€é¢ç§¯ã€ä½“ç§¯ã€å¯†åº¦ã€æ¸©åº¦ã€æ—¶é—´ã€é€Ÿåº¦ã€è§’åº¦ã€å‹åŠ›ã€çƒ­é‡ã€åŠŸç‡ã€æ•°æ®ç­‰å¤šç§å•ä½è½¬æ¢</p>
        </div>

        <div class="content">
            <div class="unit-type-tabs">
                <div class="unit-type-tab active" onclick="switchUnitType('length')">
                    ğŸ“ é•¿åº¦
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('weight')">
                    âš–ï¸ é‡é‡
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('area')">
                    ğŸ“¦ é¢ç§¯
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('volume')">
                    ğŸ§Š ä½“ç§¯
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('density')">
                    ğŸ¯ å¯†åº¦
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('temperature')">
                    ğŸŒ¡ï¸ æ¸©åº¦
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('time')">
                    â° æ—¶é—´
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('speed')">
                    ğŸš€ é€Ÿåº¦
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('angle')">
                    ğŸ“ è§’åº¦
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('pressure')">
                    ğŸ”§ å‹åŠ›
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('energy')">
                    âš¡ çƒ­é‡
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('power')">
                    ğŸ’¡ åŠŸç‡
                </div>
                <div class="unit-type-tab" onclick="switchUnitType('data')">
                    ğŸ’¾ æ•°æ®
                </div>
            </div>

            <!-- é•¿åº¦è½¬æ¢ -->
            <div class="converter-content active" id="length-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="length-from-unit">
                                <option value="nm">çº³ç±³ (nm)</option>
                                <option value="um">å¾®ç±³ (Î¼m)</option>
                                <option value="mm">æ¯«ç±³ (mm)</option>
                                <option value="cm">å˜ç±³ (cm)</option>
                                <option value="in">è‹±å¯¸ (in)</option>
                                <option value="ft">è‹±å°º (ft)</option>
                                <option value="yd">ç  (yd)</option>
                                <option value="m">ç±³ (m)</option>
                                <option value="km">åƒç±³ (km)</option>
                                <option value="mi">è‹±é‡Œ (mi)</option>
                                <option value="nmi">æµ·é‡Œ (nmi)</option>
                            </select>
                            <input type="number" id="length-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('length')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="length-to-unit">
                                <option value="nm">çº³ç±³ (nm)</option>
                                <option value="um">å¾®ç±³ (Î¼m)</option>
                                <option value="mm">æ¯«ç±³ (mm)</option>
                                <option value="cm">å˜ç±³ (cm)</option>
                                <option value="in">è‹±å¯¸ (in)</option>
                                <option value="ft">è‹±å°º (ft)</option>
                                <option value="yd">ç  (yd)</option>
                                <option value="m" selected>ç±³ (m)</option>
                                <option value="km">åƒç±³ (km)</option>
                                <option value="mi">è‹±é‡Œ (mi)</option>
                                <option value="nmi">æµ·é‡Œ (nmi)</option>
                            </select>
                            <input type="number" id="length-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="length-info"></div>
                </div>
            </div>

            <!-- é‡é‡è½¬æ¢ -->
            <div class="converter-content" id="weight-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="weight-from-unit">
                                <option value="mg">æ¯«å…‹ (mg)</option>
                                <option value="g">å…‹ (g)</option>
                                <option value="liang">ä¸¤</option>
                                <option value="oz">ç›å¸ (oz)</option>
                                <option value="jin">æ–¤</option>
                                <option value="lb">ç£… (lb)</option>
                                <option value="kg">åƒå…‹ (kg)</option>
                                <option value="t">å¨ (t)</option>
                            </select>
                            <input type="number" id="weight-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('weight')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="weight-to-unit">
                                <option value="mg">æ¯«å…‹ (mg)</option>
                                <option value="g" selected>å…‹ (g)</option>
                                <option value="liang">ä¸¤</option>
                                <option value="oz">ç›å¸ (oz)</option>
                                <option value="jin">æ–¤</option>
                                <option value="lb">ç£… (lb)</option>
                                <option value="kg">åƒå…‹ (kg)</option>
                                <option value="t">å¨ (t)</option>
                            </select>
                            <input type="number" id="weight-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="weight-info"></div>
                </div>
            </div>

            <!-- é¢ç§¯è½¬æ¢ -->
            <div class="converter-content" id="area-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="area-from-unit">
                                <option value="mm2">å¹³æ–¹æ¯«ç±³ (mmÂ²)</option>
                                <option value="cm2">å¹³æ–¹å˜ç±³ (cmÂ²)</option>
                                <option value="in2">å¹³æ–¹è‹±å¯¸ (inÂ²)</option>
                                <option value="ft2">å¹³æ–¹è‹±å°º (ftÂ²)</option>
                                <option value="yd2">å¹³æ–¹ç  (ydÂ²)</option>
                                <option value="m2">å¹³æ–¹ç±³ (mÂ²)</option>
                                <option value="mu">äº©</option>
                                <option value="ha">å…¬é¡· (ha)</option>
                                <option value="acre">è‹±äº© (acre)</option>
                                <option value="km2">å¹³æ–¹åƒç±³ (kmÂ²)</option>
                                <option value="mi2">å¹³æ–¹è‹±é‡Œ (miÂ²)</option>
                            </select>
                            <input type="number" id="area-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('area')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="area-to-unit">
                                <option value="mm2">å¹³æ–¹æ¯«ç±³ (mmÂ²)</option>
                                <option value="cm2">å¹³æ–¹å˜ç±³ (cmÂ²)</option>
                                <option value="in2">å¹³æ–¹è‹±å¯¸ (inÂ²)</option>
                                <option value="ft2">å¹³æ–¹è‹±å°º (ftÂ²)</option>
                                <option value="yd2">å¹³æ–¹ç  (ydÂ²)</option>
                                <option value="m2" selected>å¹³æ–¹ç±³ (mÂ²)</option>
                                <option value="mu">äº©</option>
                                <option value="ha">å…¬é¡· (ha)</option>
                                <option value="acre">è‹±äº© (acre)</option>
                                <option value="km2">å¹³æ–¹åƒç±³ (kmÂ²)</option>
                                <option value="mi2">å¹³æ–¹è‹±é‡Œ (miÂ²)</option>
                            </select>
                            <input type="number" id="area-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="area-info"></div>
                </div>
            </div>

            <!-- ä½“ç§¯è½¬æ¢ -->
            <div class="converter-content" id="volume-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="volume-from-unit">
                                <option value="ml">æ¯«å‡ (mL)</option>
                                <option value="cm3">ç«‹æ–¹å˜ç±³ (cmÂ³)</option>
                                <option value="fl-oz">æ¶²ä½“ç›å¸ (fl oz)</option>
                                <option value="cup">æ¯ (cup)</option>
                                <option value="pt">å“è„± (pt)</option>
                                <option value="qt">å¤¸è„± (qt)</option>
                                <option value="l">å‡ (L)</option>
                                <option value="dm3">ç«‹æ–¹åˆ†ç±³ (dmÂ³)</option>
                                <option value="gal">åŠ ä»‘ (gal)</option>
                                <option value="m3">ç«‹æ–¹ç±³ (mÂ³)</option>
                            </select>
                            <input type="number" id="volume-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('volume')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="volume-to-unit">
                                <option value="ml">æ¯«å‡ (mL)</option>
                                <option value="cm3">ç«‹æ–¹å˜ç±³ (cmÂ³)</option>
                                <option value="fl-oz">æ¶²ä½“ç›å¸ (fl oz)</option>
                                <option value="cup">æ¯ (cup)</option>
                                <option value="pt">å“è„± (pt)</option>
                                <option value="qt">å¤¸è„± (qt)</option>
                                <option value="l" selected>å‡ (L)</option>
                                <option value="dm3">ç«‹æ–¹åˆ†ç±³ (dmÂ³)</option>
                                <option value="gal">åŠ ä»‘ (gal)</option>
                                <option value="m3">ç«‹æ–¹ç±³ (mÂ³)</option>
                            </select>
                            <input type="number" id="volume-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="volume-info"></div>
                </div>
            </div>

            <!-- å¯†åº¦è½¬æ¢ -->
            <div class="converter-content" id="density-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="density-from-unit">
                                <option value="g/cm3">å…‹/ç«‹æ–¹å˜ç±³ (g/cmÂ³)</option>
                                <option value="g/ml">å…‹/æ¯«å‡ (g/mL)</option>
                                <option value="kg/l">åƒå…‹/å‡ (kg/L)</option>
                                <option value="kg/m3">åƒå…‹/ç«‹æ–¹ç±³ (kg/mÂ³)</option>
                                <option value="t/m3">å¨/ç«‹æ–¹ç±³ (t/mÂ³)</option>
                                <option value="lb/in3">ç£…/ç«‹æ–¹è‹±å¯¸ (lb/inÂ³)</option>
                                <option value="lb/ft3">ç£…/ç«‹æ–¹è‹±å°º (lb/ftÂ³)</option>
                                <option value="lb/gal">ç£…/åŠ ä»‘ (lb/gal)</option>
                            </select>
                            <input type="number" id="density-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('density')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="density-to-unit">
                                <option value="g/cm3" selected>å…‹/ç«‹æ–¹å˜ç±³ (g/cmÂ³)</option>
                                <option value="g/ml">å…‹/æ¯«å‡ (g/mL)</option>
                                <option value="kg/l">åƒå…‹/å‡ (kg/L)</option>
                                <option value="kg/m3">åƒå…‹/ç«‹æ–¹ç±³ (kg/mÂ³)</option>
                                <option value="t/m3">å¨/ç«‹æ–¹ç±³ (t/mÂ³)</option>
                                <option value="lb/in3">ç£…/ç«‹æ–¹è‹±å¯¸ (lb/inÂ³)</option>
                                <option value="lb/ft3">ç£…/ç«‹æ–¹è‹±å°º (lb/ftÂ³)</option>
                                <option value="lb/gal">ç£…/åŠ ä»‘ (lb/gal)</option>
                            </select>
                            <input type="number" id="density-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="density-info"></div>
                </div>
            </div>

            <!-- æ¸©åº¦è½¬æ¢ -->
            <div class="converter-content" id="temperature-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="temperature-from-unit">
                                <option value="k">å¼€å°”æ–‡ (K)</option>
                                <option value="c">æ‘„æ°åº¦ (Â°C)</option>
                                <option value="f">åæ°åº¦ (Â°F)</option>
                            </select>
                            <input type="number" id="temperature-from-value" placeholder="è¾“å…¥æ•°å€¼" value="0">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('temperature')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="temperature-to-unit">
                                <option value="k">å¼€å°”æ–‡ (K)</option>
                                <option value="c" selected>æ‘„æ°åº¦ (Â°C)</option>
                                <option value="f">åæ°åº¦ (Â°F)</option>
                            </select>
                            <input type="number" id="temperature-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="temperature-info"></div>
                </div>
            </div>

            <!-- æ—¶é—´è½¬æ¢ -->
            <div class="converter-content" id="time-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="time-from-unit">
                                <option value="us">å¾®ç§’ (Î¼s)</option>
                                <option value="ms">æ¯«ç§’ (ms)</option>
                                <option value="s">ç§’ (s)</option>
                                <option value="min">åˆ†é’Ÿ (min)</option>
                                <option value="h">å°æ—¶ (h)</option>
                                <option value="d">å¤© (d)</option>
                                <option value="week">å‘¨</option>
                                <option value="month">æœˆ</option>
                                <option value="year">å¹´</option>
                            </select>
                            <input type="number" id="time-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('time')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="time-to-unit">
                                <option value="us">å¾®ç§’ (Î¼s)</option>
                                <option value="ms">æ¯«ç§’ (ms)</option>
                                <option value="s" selected>ç§’ (s)</option>
                                <option value="min">åˆ†é’Ÿ (min)</option>
                                <option value="h">å°æ—¶ (h)</option>
                                <option value="d">å¤© (d)</option>
                                <option value="week">å‘¨</option>
                                <option value="month">æœˆ</option>
                                <option value="year">å¹´</option>
                            </select>
                            <input type="number" id="time-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="time-info"></div>
                </div>
            </div>

            <!-- é€Ÿåº¦è½¬æ¢ -->
            <div class="converter-content" id="speed-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="speed-from-unit">
                                <option value="ft/s">è‹±å°º/ç§’ (ft/s)</option>
                                <option value="m/s">ç±³/ç§’ (m/s)</option>
                                <option value="km/h">åƒç±³/å°æ—¶ (km/h)</option>
                                <option value="knot">èŠ‚ (knot)</option>
                                <option value="mi/h">è‹±é‡Œ/å°æ—¶ (mph)</option>
                                <option value="mach">é©¬èµ« (Mach)</option>
                            </select>
                            <input type="number" id="speed-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('speed')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="speed-to-unit">
                                <option value="ft/s">è‹±å°º/ç§’ (ft/s)</option>
                                <option value="m/s">ç±³/ç§’ (m/s)</option>
                                <option value="km/h" selected>åƒç±³/å°æ—¶ (km/h)</option>
                                <option value="knot">èŠ‚ (knot)</option>
                                <option value="mi/h">è‹±é‡Œ/å°æ—¶ (mph)</option>
                                <option value="mach">é©¬èµ« (Mach)</option>
                            </select>
                            <input type="number" id="speed-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="speed-info"></div>
                </div>
            </div>

            <!-- è§’åº¦è½¬æ¢ -->
            <div class="converter-content" id="angle-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="angle-from-unit">
                                <option value="deg">åº¦ (Â°)</option>
                                <option value="rad">å¼§åº¦ (rad)</option>
                                <option value="grad">æ¢¯åº¦ (grad)</option>
                                <option value="arcmin">è§’åˆ† (')</option>
                                <option value="arcsec">è§’ç§’ (")</option>
                                <option value="turn">åœˆ</option>
                            </select>
                            <input type="number" id="angle-from-value" placeholder="è¾“å…¥æ•°å€¼" value="180">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('angle')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="angle-to-unit">
                                <option value="deg">åº¦ (Â°)</option>
                                <option value="rad" selected>å¼§åº¦ (rad)</option>
                                <option value="grad">æ¢¯åº¦ (grad)</option>
                                <option value="arcmin">è§’åˆ† (')</option>
                                <option value="arcsec">è§’ç§’ (")</option>
                                <option value="turn">åœˆ</option>
                            </select>
                            <input type="number" id="angle-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="angle-info"></div>
                </div>
            </div>

            <!-- å‹åŠ›è½¬æ¢ -->
            <div class="converter-content" id="pressure-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="pressure-from-unit">
                                <option value="pa">å¸•æ–¯å¡ (Pa)</option>
                                <option value="kpa">åƒå¸• (kPa)</option>
                                <option value="mpa">å…†å¸• (MPa)</option>
                                <option value="bar">å·´ (bar)</option>
                                <option value="psi">ç£…åŠ›/å¹³æ–¹è‹±å¯¸ (psi)</option>
                                <option value="atm">æ ‡å‡†å¤§æ°”å‹ (atm)</option>
                                <option value="mmhg">æ¯«ç±³æ±æŸ± (mmHg)</option>
                                <option value="torr">æ‰˜ (Torr)</option>
                            </select>
                            <input type="number" id="pressure-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('pressure')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="pressure-to-unit">
                                <option value="pa">å¸•æ–¯å¡ (Pa)</option>
                                <option value="kpa" selected>åƒå¸• (kPa)</option>
                                <option value="mpa">å…†å¸• (MPa)</option>
                                <option value="bar">å·´ (bar)</option>
                                <option value="psi">ç£…åŠ›/å¹³æ–¹è‹±å¯¸ (psi)</option>
                                <option value="atm">æ ‡å‡†å¤§æ°”å‹ (atm)</option>
                                <option value="mmhg">æ¯«ç±³æ±æŸ± (mmHg)</option>
                                <option value="torr">æ‰˜ (Torr)</option>
                            </select>
                            <input type="number" id="pressure-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="pressure-info"></div>
                </div>
            </div>

            <!-- çƒ­é‡/èƒ½é‡è½¬æ¢ -->
            <div class="converter-content" id="energy-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="energy-from-unit">
                                <option value="j">ç„¦è€³ (J)</option>
                                <option value="kj">åƒç„¦ (kJ)</option>
                                <option value="cal">å¡è·¯é‡Œ (cal)</option>
                                <option value="kcal">åƒå¡ (kcal)</option>
                                <option value="wh">ç“¦æ—¶ (Wh)</option>
                                <option value="kwh">åƒç“¦æ—¶ (kWh)</option>
                                <option value="ev">ç”µå­ä¼ç‰¹ (eV)</option>
                                <option value="btu">è‹±çƒ­å•ä½ (BTU)</option>
                            </select>
                            <input type="number" id="energy-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('energy')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="energy-to-unit">
                                <option value="j">ç„¦è€³ (J)</option>
                                <option value="kj" selected>åƒç„¦ (kJ)</option>
                                <option value="cal">å¡è·¯é‡Œ (cal)</option>
                                <option value="kcal">åƒå¡ (kcal)</option>
                                <option value="wh">ç“¦æ—¶ (Wh)</option>
                                <option value="kwh">åƒç“¦æ—¶ (kWh)</option>
                                <option value="ev">ç”µå­ä¼ç‰¹ (eV)</option>
                                <option value="btu">è‹±çƒ­å•ä½ (BTU)</option>
                            </select>
                            <input type="number" id="energy-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="energy-info"></div>
                </div>
            </div>

            <!-- åŠŸç‡è½¬æ¢ -->
            <div class="converter-content" id="power-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="power-from-unit">
                                <option value="w">ç“¦ç‰¹ (W)</option>
                                <option value="kw">åƒç“¦ (kW)</option>
                                <option value="mw">å…†ç“¦ (MW)</option>
                                <option value="hp">é©¬åŠ› (hp)</option>
                                <option value="btu/h">è‹±çƒ­å•ä½/å°æ—¶ (BTU/h)</option>
                                <option value="cal/s">å¡è·¯é‡Œ/ç§’ (cal/s)</option>
                            </select>
                            <input type="number" id="power-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('power')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="power-to-unit">
                                <option value="w">ç“¦ç‰¹ (W)</option>
                                <option value="kw" selected>åƒç“¦ (kW)</option>
                                <option value="mw">å…†ç“¦ (MW)</option>
                                <option value="hp">é©¬åŠ› (hp)</option>
                                <option value="btu/h">è‹±çƒ­å•ä½/å°æ—¶ (BTU/h)</option>
                                <option value="cal/s">å¡è·¯é‡Œ/ç§’ (cal/s)</option>
                            </select>
                            <input type="number" id="power-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="power-info"></div>
                </div>
            </div>

            <!-- æ•°æ®/å­˜å‚¨è½¬æ¢ -->
            <div class="converter-content" id="data-converter">
                <div class="converter-box">
                    <div class="conversion-grid">
                        <div class="unit-box">
                            <label>ä»</label>
                            <select id="data-from-unit">
                                <option value="bit">æ¯”ç‰¹ (bit)</option>
                                <option value="byte">å­—èŠ‚ (Byte)</option>
                                <option value="kb">åƒå­—èŠ‚ (KB)</option>
                                <option value="kib">åƒä½å­—èŠ‚ (KiB)</option>
                                <option value="mb">å…†å­—èŠ‚ (MB)</option>
                                <option value="mib">å…†ä½å­—èŠ‚ (MiB)</option>
                                <option value="gb">å‰å­—èŠ‚ (GB)</option>
                                <option value="gib">å‰ä½å­—èŠ‚ (GiB)</option>
                                <option value="tb">å¤ªå­—èŠ‚ (TB)</option>
                                <option value="tib">å¤ªä½å­—èŠ‚ (TiB)</option>
                                <option value="pb">æ‹å­—èŠ‚ (PB)</option>
                                <option value="pib">æ‹ä½å­—èŠ‚ (PiB)</option>
                            </select>
                            <input type="number" id="data-from-value" placeholder="è¾“å…¥æ•°å€¼" value="1">
                        </div>

                        <button class="swap-btn" onclick="swapUnits('data')" title="äº¤æ¢å•ä½">â‡„</button>

                        <div class="unit-box">
                            <label>åˆ°</label>
                            <select id="data-to-unit">
                                <option value="bit">æ¯”ç‰¹ (bit)</option>
                                <option value="byte">å­—èŠ‚ (Byte)</option>
                                <option value="kb">åƒå­—èŠ‚ (KB)</option>
                                <option value="kib">åƒä½å­—èŠ‚ (KiB)</option>
                                <option value="mb" selected>å…†å­—èŠ‚ (MB)</option>
                                <option value="mib">å…†ä½å­—èŠ‚ (MiB)</option>
                                <option value="gb">å‰å­—èŠ‚ (GB)</option>
                                <option value="gib">å‰ä½å­—èŠ‚ (GiB)</option>
                                <option value="tb">å¤ªå­—èŠ‚ (TB)</option>
                                <option value="tib">å¤ªä½å­—èŠ‚ (TiB)</option>
                                <option value="pb">æ‹å­—èŠ‚ (PB)</option>
                                <option value="pib">æ‹ä½å­—èŠ‚ (PiB)</option>
                            </select>
                            <input type="number" id="data-to-value" placeholder="è½¬æ¢ç»“æœ" readonly>
                        </div>
                    </div>
                    <div class="result-info" id="data-info"></div>
                </div>
            </div>

            <!-- å†å²è®°å½• -->
            <div class="history-section">
                <div class="history-header">
                    <h3>ğŸ“Š è½¬æ¢å†å²</h3>
                    <div>
                        <button class="history-btn danger" onclick="clearHistory()">æ¸…ç©ºå†å²</button>
                    </div>
                </div>
                <div class="history-list" id="historyList">
                    <div class="empty-history">
                        <div>ğŸ“</div>
                        <p>æš‚æ— è½¬æ¢å†å²</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å•ä½è½¬æ¢é…ç½®ï¼ˆåŸºäºç²¾ç¡®çš„å›½é™…æ ‡å‡†è½¬æ¢ç³»æ•°ï¼‰
        const conversionData = {
            length: {
                m: 1,
                km: 0.001,
                cm: 100,
                mm: 1000,
                um: 1000000,
                nm: 1000000000,
                mi: 0.000621371192237334,      // 1 m = 0.000621371192237334 è‹±é‡Œ
                yd: 1.0936132983377078,         // 1 m = 1.0936132983377078 ç 
                ft: 3.280839895013123,          // 1 m = 3.280839895013123 è‹±å°º
                in: 39.37007874015748,          // 1 m = 39.37007874015748 è‹±å¯¸
                nmi: 0.0005399568034557236      // 1 m = 0.0005399568034557236 æµ·é‡Œ
            },
            weight: {
                kg: 1,
                g: 1000,
                mg: 1000000,
                t: 0.001,
                lb: 2.2046226218487757,         // 1 kg = 2.2046226218487757 ç£…
                oz: 35.27396194958041,          // 1 kg = 35.27396194958041 ç›å¸
                jin: 2,                         // 1 kg = 2 æ–¤ï¼ˆä¸­å›½æ ‡å‡†ï¼‰
                liang: 20                       // 1 kg = 20 ä¸¤ï¼ˆä¸­å›½æ ‡å‡†ï¼‰
            },
            area: {
                m2: 1,
                km2: 0.000001,
                cm2: 10000,
                mm2: 1000000,
                ha: 0.0001,                     // 1 mÂ² = 0.0001 å…¬é¡·
                mu: 0.0015,                     // 1 mÂ² = 0.0015 äº©ï¼ˆ1äº© â‰ˆ 666.67 mÂ²ï¼‰
                mi2: 3.861021585424458e-7,      // 1 mÂ² = 3.861021585424458e-7 å¹³æ–¹è‹±é‡Œ
                yd2: 1.1959900463010803,        // 1 mÂ² = 1.1959900463010803 å¹³æ–¹ç 
                ft2: 10.763910416709722,        // 1 mÂ² = 10.763910416709722 å¹³æ–¹è‹±å°º
                in2: 1550.0031000062,           // 1 mÂ² = 1550.0031000062 å¹³æ–¹è‹±å¯¸
                acre: 0.0002471053814671653     // 1 mÂ² = 0.0002471053814671653 è‹±äº©
            },
            volume: {
                m3: 1,
                l: 1000,
                ml: 1000000,
                cm3: 1000000,
                dm3: 1000,
                gal: 264.17205235814845,        // 1 mÂ³ = 264.17205235814845 ç¾åˆ¶åŠ ä»‘
                qt: 1056.6882094325938,         // 1 mÂ³ = 1056.6882094325938 å¤¸è„±
                pt: 2113.3764188651876,         // 1 mÂ³ = 2113.3764188651876 å“è„±
                cup: 4226.752837730375,         // 1 mÂ³ = 4226.752837730375 æ¯
                'fl-oz': 33814.022701842998     // 1 mÂ³ = 33814.022701842998 æ¶²ä½“ç›å¸
            },
            density: {
                'kg/m3': 1,                     // åŸºå‡†å•ä½ï¼šåƒå…‹/ç«‹æ–¹ç±³
                'g/cm3': 0.001,                 // 1 kg/mÂ³ = 0.001 g/cmÂ³ï¼ˆ1 g/cmÂ³ = 1000 kg/mÂ³ï¼‰
                'g/ml': 0.001,                  // 1 kg/mÂ³ = 0.001 g/mLï¼ˆç­‰åŒäº g/cmÂ³ï¼‰
                'kg/l': 0.001,                  // 1 kg/mÂ³ = 0.001 kg/Lï¼ˆ1 kg/L = 1000 kg/mÂ³ï¼‰
                't/m3': 0.001,                  // 1 kg/mÂ³ = 0.001 t/mÂ³ï¼ˆ1 t/mÂ³ = 1000 kg/mÂ³ï¼‰
                'lb/in3': 3.6127292e-5,         // 1 kg/mÂ³ = 3.6127292e-5 lb/inÂ³ï¼ˆ1 lb/inÂ³ â‰ˆ 27679.9 kg/mÂ³ï¼‰
                'lb/ft3': 0.062427960576145,    // 1 kg/mÂ³ = 0.062427960576145 lb/ftÂ³ï¼ˆ1 lb/ftÂ³ â‰ˆ 16.0185 kg/mÂ³ï¼‰
                'lb/gal': 0.008345404452053,    // 1 kg/mÂ³ = 0.008345404452053 lb/galï¼ˆ1 lb/gal â‰ˆ 119.826 kg/mÂ³ï¼‰
            },
            speed: {
                'm/s': 1,
                'km/h': 3.6,
                'mi/h': 2.236936292054402,      // 1 m/s = 2.236936292054402 è‹±é‡Œ/å°æ—¶
                'ft/s': 3.280839895013123,      // 1 m/s = 3.280839895013123 è‹±å°º/ç§’
                'knot': 1.9438444924406046,     // 1 m/s = 1.9438444924406046 èŠ‚
                'mach': 0.0029154518950437317   // 1 m/s = 0.0029154518950437317 é©¬èµ«ï¼ˆ343 m/sæ ‡å‡†ï¼‰
            },
            time: {
                s: 1,
                min: 1/60,
                h: 1/3600,
                d: 1/86400,
                week: 1/604800,
                month: 1/2592000,               // æŒ‰30å¤©è®¡ç®—
                year: 1/31536000,               // æŒ‰365å¤©è®¡ç®—
                ms: 1000,
                us: 1000000
            },
            angle: {
                deg: 1,
                rad: Math.PI / 180,             // 1Â° = Ï€/180 å¼§åº¦ â‰ˆ 0.017453292519943295
                grad: 10/9,                     // 1Â° = 10/9 æ¢¯åº¦ â‰ˆ 1.1111111111111112
                arcmin: 60,                     // 1Â° = 60 è§’åˆ†
                arcsec: 3600,                   // 1Â° = 3600 è§’ç§’
                turn: 1/360                     // 1Â° = 1/360 åœˆ â‰ˆ 0.002777777777777778
            },
            pressure: {
                pa: 1,
                kpa: 0.001,
                mpa: 0.000001,
                bar: 0.00001,                   // 1 Pa = 0.00001 bar
                psi: 0.00014503773773020924,    // 1 Pa = 0.00014503773773020924 ç£…åŠ›/å¹³æ–¹è‹±å¯¸
                atm: 9.869232667160129e-6,      // 1 Pa = 9.869232667160129e-6 æ ‡å‡†å¤§æ°”å‹
                mmhg: 0.007500616827041698,     // 1 Pa = 0.007500616827041698 æ¯«ç±³æ±æŸ±
                torr: 0.007500616827041698      // 1 Pa = 0.007500616827041698 æ‰˜
            },
            energy: {
                j: 1,
                kj: 0.001,
                cal: 0.23900573613766732,       // 1 J = 0.23900573613766732 å¡è·¯é‡Œï¼ˆthermochemicalï¼‰
                kcal: 0.00023900573613766733,   // 1 J = 0.00023900573613766733 åƒå¡
                wh: 1/3600,                     // 1 J = 1/3600 ç“¦æ—¶ â‰ˆ 0.0002777777777777778
                kwh: 1/3600000,                 // 1 J = 1/3600000 åƒç“¦æ—¶ â‰ˆ 2.7777777777777776e-7
                ev: 6.241509074460763e18,       // 1 J = 6.241509074460763e18 ç”µå­ä¼ç‰¹
                btu: 0.0009478171203133172      // 1 J = 0.0009478171203133172 è‹±çƒ­å•ä½
            },
            power: {
                w: 1,
                kw: 0.001,
                mw: 0.000001,
                hp: 0.0013410220888438283,      // 1 W = 0.0013410220888438283 é©¬åŠ›ï¼ˆæœºæ¢°é©¬åŠ›ï¼‰
                'btu/h': 3.412141633127942,     // 1 W = 3.412141633127942 è‹±çƒ­å•ä½/å°æ—¶
                'cal/s': 0.23900573613766732    // 1 W = 0.23900573613766732 å¡è·¯é‡Œ/ç§’
            },
            data: {
                bit: 8,                         // 1 byte = 8 bits
                byte: 1,                        // åŸºå‡†å•ä½ï¼šå­—èŠ‚
                kb: 0.001,                      // 1 byte = 0.001 KBï¼ˆåè¿›åˆ¶ï¼š1 KB = 1000 bytesï¼‰
                mb: 0.000001,                   // 1 byte = 0.000001 MBï¼ˆ1 MB = 1,000,000 bytesï¼‰
                gb: 1e-9,                       // 1 byte = 1e-9 GBï¼ˆ1 GB = 1,000,000,000 bytesï¼‰
                tb: 1e-12,                      // 1 byte = 1e-12 TBï¼ˆ1 TB = 1,000,000,000,000 bytesï¼‰
                pb: 1e-15,                      // 1 byte = 1e-15 PBï¼ˆ1 PB = 1,000,000,000,000,000 bytesï¼‰
                kib: 1/1024,                    // 1 byte = 1/1024 KiBï¼ˆäºŒè¿›åˆ¶ï¼š1 KiB = 1024 bytesï¼‰
                mib: 1/1048576,                 // 1 byte = 1/1048576 MiBï¼ˆ1 MiB = 1024Â² bytesï¼‰
                gib: 1/1073741824,              // 1 byte = 1/1073741824 GiBï¼ˆ1 GiB = 1024Â³ bytesï¼‰
                tib: 1/1099511627776,           // 1 byte = 1/1099511627776 TiBï¼ˆ1 TiB = 1024â´ bytesï¼‰
                pib: 1/1125899906842624         // 1 byte = 1/1125899906842624 PiBï¼ˆ1 PiB = 1024âµ bytesï¼‰
            }
        };

        const HISTORY_KEY = 'unit_converter_history';
        const MAX_HISTORY = 20;
        let currentType = 'length';

        // æ™ºèƒ½æ ¼å¼åŒ–æ•°å­—æ˜¾ç¤º
        function formatNumber(num) {
            if (num === 0) return '0';
            
            const absNum = Math.abs(num);
            
            // å¯¹äºéå¸¸å¤§æˆ–éå¸¸å°çš„æ•°å­—ä½¿ç”¨ç§‘å­¦è®°æ•°æ³•
            if (absNum > 1e15 || (absNum < 1e-6 && absNum > 0)) {
                return num.toExponential(10).replace(/\.?0+e/, 'e');
            }
            
            // å¯¹äºæ™®é€šå¤§å°çš„æ•°å­—ï¼Œä½¿ç”¨æœ€å¤š12ä½å°æ•°
            let formatted = num.toFixed(12);
            // ç§»é™¤æœ«å°¾çš„0å’Œå°æ•°ç‚¹
            formatted = formatted.replace(/\.?0+$/, '');
            
            return formatted;
        }

        // åˆ‡æ¢å•ä½ç±»å‹
        function switchUnitType(type) {
            currentType = type;
            
            // æ›´æ–°æ ‡ç­¾é¡µæ ·å¼
            document.querySelectorAll('.unit-type-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // æ›´æ–°å†…å®¹æ˜¾ç¤º
            document.querySelectorAll('.converter-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${type}-converter`).classList.add('active');

            // æ‰§è¡Œä¸€æ¬¡è½¬æ¢ï¼ˆä¸è®°å…¥å†å²ï¼‰
            convert(type, false);
        }

        // é€šç”¨è½¬æ¢å‡½æ•°
        function convert(type, saveHistory = true) {
            const fromValue = parseFloat(document.getElementById(`${type}-from-value`).value);
            const fromUnit = document.getElementById(`${type}-from-unit`).value;
            const toUnit = document.getElementById(`${type}-to-unit`).value;
            const toValueInput = document.getElementById(`${type}-to-value`);
            const infoDiv = document.getElementById(`${type}-info`);

            if (isNaN(fromValue)) {
                toValueInput.value = '';
                infoDiv.textContent = '';
                return;
            }

            let result;
            
            if (type === 'temperature') {
                result = convertTemperature(fromValue, fromUnit, toUnit);
            } else {
                // æ ‡å‡†è½¬æ¢ï¼šå…ˆè½¬æ¢åˆ°åŸºå‡†å•ä½ï¼Œå†è½¬æ¢åˆ°ç›®æ ‡å•ä½
                const baseValue = fromValue / conversionData[type][fromUnit];
                result = baseValue * conversionData[type][toUnit];
            }

            // ä½¿ç”¨æ™ºèƒ½æ ¼å¼åŒ–å‡½æ•°
            const formattedResult = formatNumber(result);
            toValueInput.value = formattedResult;
            
            // æ˜¾ç¤ºè½¬æ¢ä¿¡æ¯
            const fromUnitText = document.getElementById(`${type}-from-unit`).selectedOptions[0].text;
            const toUnitText = document.getElementById(`${type}-to-unit`).selectedOptions[0].text;
            infoDiv.textContent = `${fromValue} ${fromUnitText} = ${formattedResult} ${toUnitText}`;

            // ä¿å­˜åˆ°å†å²è®°å½•
            if (saveHistory) {
                saveToHistory(type, fromValue, fromUnitText, result, toUnitText);
            }
        }

        // æ¸©åº¦è½¬æ¢ï¼ˆç‰¹æ®Šå¤„ç†ï¼‰
        function convertTemperature(value, fromUnit, toUnit) {
            // å…ˆè½¬æ¢ä¸ºæ‘„æ°åº¦
            let celsius;
            switch(fromUnit) {
                case 'c':
                    celsius = value;
                    break;
                case 'f':
                    celsius = (value - 32) * 5/9;
                    break;
                case 'k':
                    celsius = value - 273.15;
                    break;
            }

            // å†è½¬æ¢ä¸ºç›®æ ‡å•ä½
            let result;
            switch(toUnit) {
                case 'c':
                    result = celsius;
                    break;
                case 'f':
                    result = celsius * 9/5 + 32;
                    break;
                case 'k':
                    result = celsius + 273.15;
                    break;
            }

            return result;
        }

        // äº¤æ¢å•ä½
        function swapUnits(type) {
            const fromUnit = document.getElementById(`${type}-from-unit`);
            const toUnit = document.getElementById(`${type}-to-unit`);
            const fromValue = document.getElementById(`${type}-from-value`);
            const toValue = document.getElementById(`${type}-to-value`);

            // äº¤æ¢å•ä½é€‰æ‹©
            const tempUnit = fromUnit.value;
            fromUnit.value = toUnit.value;
            toUnit.value = tempUnit;

            // äº¤æ¢æ•°å€¼
            const tempValue = fromValue.value;
            fromValue.value = toValue.value;
            toValue.value = tempValue;

            // é‡æ–°è®¡ç®—
            convert(type);
        }

        // ä¿å­˜åˆ°å†å²è®°å½•
        function saveToHistory(type, fromValue, fromUnit, toValue, toUnit) {
            const history = getHistory();
            
            const typeNames = {
                'length': 'é•¿åº¦',
                'weight': 'é‡é‡',
                'area': 'é¢ç§¯',
                'volume': 'ä½“ç§¯',
                'density': 'å¯†åº¦',
                'temperature': 'æ¸©åº¦',
                'time': 'æ—¶é—´',
                'speed': 'é€Ÿåº¦',
                'angle': 'è§’åº¦',
                'pressure': 'å‹åŠ›',
                'energy': 'çƒ­é‡',
                'power': 'åŠŸç‡',
                'data': 'æ•°æ®'
            };

            const record = {
                id: Date.now(),
                type: typeNames[type],
                typKey: type,
                from: `${fromValue} ${fromUnit}`,
                to: `${formatNumber(toValue)} ${toUnit}`,
                timestamp: new Date().toLocaleString('zh-CN')
            };

            history.unshift(record);

            if (history.length > MAX_HISTORY) {
                history.pop();
            }

            localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
            displayHistory();
        }

        // è·å–å†å²è®°å½•
        function getHistory() {
            const historyStr = localStorage.getItem(HISTORY_KEY);
            return historyStr ? JSON.parse(historyStr) : [];
        }

        // æ˜¾ç¤ºå†å²è®°å½•
        function displayHistory() {
            const history = getHistory();
            const historyList = document.getElementById('historyList');

            if (history.length === 0) {
                historyList.innerHTML = `
                    <div class="empty-history">
                        <div>ğŸ“</div>
                        <p>æš‚æ— è½¬æ¢å†å²</p>
                    </div>
                `;
                return;
            }

            historyList.innerHTML = history.map(record => `
                <div class="history-item">
                    <div class="history-item-header">
                        <div class="history-item-title">${record.type}è½¬æ¢</div>
                        <div class="history-item-actions">
                            <div class="history-item-date">${record.timestamp}</div>
                            <button class="delete-history-btn" onclick="deleteHistoryItem(${record.id}, event)" title="åˆ é™¤æ­¤è®°å½•">åˆ é™¤</button>
                        </div>
                    </div>
                    <div class="history-item-content">
                        ${record.from} = ${record.to}
                    </div>
                </div>
            `).join('');
        }

        // åˆ é™¤å•æ¡å†å²è®°å½•
        function deleteHistoryItem(id, event) {
            event.stopPropagation();
            
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡å†å²è®°å½•å—ï¼Ÿ')) {
                let history = getHistory();
                history = history.filter(record => record.id !== id);
                localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
                displayHistory();
            }
        }

        // æ¸…ç©ºå†å²è®°å½•
        function clearHistory() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) {
                localStorage.removeItem(HISTORY_KEY);
                displayHistory();
            }
        }

        // ä¸ºæ‰€æœ‰è¾“å…¥æ¡†å’Œé€‰æ‹©æ¡†æ·»åŠ äº‹ä»¶ç›‘å¬
        document.addEventListener('DOMContentLoaded', function() {
            const types = ['length', 'weight', 'area', 'volume', 'density', 'temperature', 'time', 'speed', 'angle', 'pressure', 'energy', 'power', 'data'];
            
            types.forEach(type => {
                const fromValue = document.getElementById(`${type}-from-value`);
                const fromUnit = document.getElementById(`${type}-from-unit`);
                const toUnit = document.getElementById(`${type}-to-unit`);

                if (fromValue) {
                    fromValue.addEventListener('input', () => convert(type));
                }
                if (fromUnit) {
                    fromUnit.addEventListener('change', () => convert(type));
                }
                if (toUnit) {
                    toUnit.addEventListener('change', () => convert(type));
                }
            });

            // åŠ è½½å†å²è®°å½•
            displayHistory();

            // åˆå§‹è½¬æ¢ï¼ˆä¸è®°å…¥å†å²ï¼‰
            convert('length', false);
        });
    </script>
</body>
</html>

