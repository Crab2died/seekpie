<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±‡ç‡è½¬æ¢å·¥å…· - åœ¨çº¿å®æ—¶æ±‡ç‡æŸ¥è¯¢è½¬æ¢ | æ”¯æŒç¾å…ƒã€æ¬§å…ƒã€äººæ°‘å¸ç­‰å¤šå¸ç§</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="å…è´¹åœ¨çº¿æ±‡ç‡è½¬æ¢å·¥å…·ï¼Œæä¾›å®æ—¶æ±‡ç‡æŸ¥è¯¢å’Œè´§å¸è½¬æ¢æœåŠ¡ã€‚æ”¯æŒç¾å…ƒã€æ¬§å…ƒã€äººæ°‘å¸ã€æ—¥å…ƒã€è‹±é•‘ç­‰å…¨çƒä¸»è¦è´§å¸ï¼Œæ•°æ®å‡†ç¡®ï¼Œæ›´æ–°åŠæ—¶ï¼Œæ“ä½œç®€å•ã€‚">
    <meta name="keywords" content="æ±‡ç‡è½¬æ¢,è´§å¸è½¬æ¢,å®æ—¶æ±‡ç‡,äººæ°‘å¸æ±‡ç‡,ç¾å…ƒæ±‡ç‡,æ¬§å…ƒæ±‡ç‡,å¤–æ±‡ç‰Œä»·,æ±‡ç‡æŸ¥è¯¢,è´§å¸è®¡ç®—å™¨">
    <meta name="author" content="å¤šåŠŸèƒ½å·¥å…·ç®±">
    <meta name="robots" content="index, follow">
    <meta name="language" content="zh-CN">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.seekpie.com/tools/exchange-rate.html">
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "æ±‡ç‡è½¬æ¢å·¥å…·",
      "description": "å…è´¹åœ¨çº¿æ±‡ç‡è½¬æ¢å·¥å…·ï¼Œæä¾›å®æ—¶æ±‡ç‡æŸ¥è¯¢å’Œè´§å¸è½¬æ¢æœåŠ¡",
      "url": "https://www.seekpie.com/tools/exchange-rate.html",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "CNY"
      },
      "featureList": [
        "å®æ—¶æ±‡ç‡æŸ¥è¯¢",
        "å¤šè´§å¸è½¬æ¢",
        "æ±‡ç‡å†å²è®°å½•",
        "æ”¯æŒç¾å…ƒã€æ¬§å…ƒã€äººæ°‘å¸ç­‰ä¸»è¦è´§å¸"
      ]
    }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .converter-section {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 30px;
            align-items: end;
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 1.1em;
        }

        .currency-select {
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.1em;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .currency-select:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .amount-input {
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1.2em;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .amount-input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .swap-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        .swap-button:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .convert-button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            height: 54px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .convert-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(79, 172, 254, 0.3);
        }

        .convert-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: stretch;
        }

        .refresh-rates-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            height: 54px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 120px;
        }

        .refresh-rates-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .refresh-rates-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .result-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-top: 20px;
        }

        .result-amount {
            font-size: 2.5em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .result-details {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .rate-info {
            background: #e8f4fd;
            border-left: 4px solid #4facfe;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 10px 10px 0;
        }

        .rate-info h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .rate-value {
            font-size: 1.3em;
            font-weight: 600;
            color: #4facfe;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4facfe;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            background: #ffe6e6;
            color: #d63031;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #d63031;
        }

        .last-updated {
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 20px;
        }

        /* å†å²è®°å½•æ ·å¼ */
        .history-section {
            margin-top: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .history-header h3 {
            color: #2c3e50;
            margin: 0;
        }

        .history-controls {
            display: flex;
            gap: 10px;
        }

        .clear-history-btn, .toggle-history-btn {
            padding: 8px 16px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.3s ease;
        }

        .toggle-history-btn {
            background: #3498db;
        }

        .clear-history-btn:hover {
            background: #c82333;
            transform: scale(1.05);
        }

        .toggle-history-btn:hover {
            background: #2980b9;
            transform: scale(1.05);
        }

        .history-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            border-color: #4facfe;
            box-shadow: 0 4px 12px rgba(79, 172, 254, 0.2);
        }

        .history-content {
            flex: 1;
        }

        .history-conversion {
            font-size: 1.1em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .history-details {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .history-actions {
            display: flex;
            gap: 8px;
        }

        .history-action-btn {
            padding: 4px 10px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .history-action-btn:hover {
            background: #c82333;
        }

        .history-action-btn.delete {
            background: #dc3545;
        }

        .history-action-btn.delete:hover {
            background: #c82333;
        }

        .history-empty {
            text-align: center;
            color: #7f8c8d;
            padding: 20px;
            font-style: italic;
        }

        /* å¹³æ¿å’Œä¸­ç­‰å±å¹• */
        @media (max-width: 992px) {
            .content {
                padding: 30px;
            }

            .converter-section {
                gap: 25px;
            }
        }

        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                border-radius: 15px;
            }

            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.8em;
                margin-bottom: 8px;
            }

            .header p {
                font-size: 0.95em;
            }

            .content {
                padding: 20px 15px;
            }

            .converter-section {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .swap-button {
                transform: rotate(90deg);
                margin: 5px auto;
            }

            .input-group label {
                font-size: 1em;
                margin-bottom: 6px;
            }

            .currency-select {
                padding: 12px;
                font-size: 1em;
            }

            .amount-input {
                padding: 12px;
                font-size: 1.1em;
                margin-top: 8px;
            }

            .button-group {
                flex-direction: column;
                gap: 10px;
                margin-bottom: 15px;
            }

            .convert-button, .refresh-rates-btn {
                width: 100%;
                padding: 12px 25px;
                font-size: 1em;
                height: 48px;
                min-width: 100%;
            }

            .result-section {
                padding: 20px 15px;
                margin-top: 15px;
            }

            .result-amount {
                font-size: 2em;
                margin-bottom: 8px;
                word-break: break-all;
            }

            .result-details {
                font-size: 1em;
            }

            .rate-info {
                padding: 12px;
                margin-top: 15px;
            }

            .rate-info h3 {
                font-size: 1.1em;
                margin-bottom: 8px;
            }

            .rate-value {
                font-size: 1.1em;
            }

            #rateDetails {
                font-size: 0.9em;
            }

            .loading {
                padding: 15px;
            }

            .error {
                padding: 12px;
                margin-top: 15px;
                font-size: 0.9em;
            }

            .last-updated {
                font-size: 0.85em;
                margin-top: 15px;
            }

            .history-section {
                margin-top: 20px;
                padding: 15px;
            }

            .history-header {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }

            .history-header h3 {
                font-size: 1.2em;
                text-align: center;
            }

            .history-controls {
                justify-content: center;
                flex-wrap: wrap;
            }

            .clear-history-btn, .toggle-history-btn {
                flex: 1;
                min-width: 120px;
                padding: 8px 16px;
                font-size: 0.95em;
            }

            .history-list {
                max-height: 300px;
            }

            .history-item {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
                padding: 12px;
            }

            .history-conversion {
                font-size: 1em;
            }

            .history-details {
                font-size: 0.85em;
            }

            .history-actions {
                justify-content: center;
            }

            .history-action-btn {
                padding: 4px 10px;
                font-size: 0.8em;
            }
        }

        /* å°å±æ‰‹æœºä¼˜åŒ– */
        @media (max-width: 480px) {
            body {
                padding: 8px;
            }

            .header h1 {
                font-size: 1.5em;
            }

            .header p {
                font-size: 0.9em;
            }

            .content {
                padding: 15px 12px;
            }

            .converter-section {
                gap: 12px;
            }

            .swap-button {
                width: 45px;
                height: 45px;
                font-size: 1.3em;
            }

            .currency-select {
                padding: 10px;
                font-size: 0.95em;
            }

            .amount-input {
                padding: 10px;
                font-size: 1em;
            }

            .convert-button, .refresh-rates-btn {
                padding: 10px 20px;
                font-size: 0.95em;
                height: 44px;
            }

            .result-amount {
                font-size: 1.8em;
            }

            .result-details {
                font-size: 0.95em;
            }

            .rate-info h3 {
                font-size: 1em;
            }

            .rate-value {
                font-size: 1em;
            }

            #rateDetails {
                font-size: 0.85em;
            }

            .history-section {
                padding: 12px;
            }

            .history-header h3 {
                font-size: 1.1em;
            }

            .history-conversion {
                font-size: 0.95em;
            }

            .history-details {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ’± æ±‡ç‡è½¬æ¢å·¥å…·</h1>
            <p>å®æ—¶æ±‡ç‡æŸ¥è¯¢ä¸è½¬æ¢</p>
        </div>
        
        <div class="content">
            <div class="converter-section">
                <div class="input-group">
                    <label for="fromCurrency">æºå¸ç§</label>
                    <select id="fromCurrency" class="currency-select">
                        <option value="USD">ğŸ‡ºğŸ‡¸ ç¾å…ƒ (USD)</option>
                        <option value="EUR">ğŸ‡ªğŸ‡º æ¬§å…ƒ (EUR)</option>
                        <option value="GBP">ğŸ‡¬ğŸ‡§ è‹±é•‘ (GBP)</option>
                        <option value="JPY">ğŸ‡¯ğŸ‡µ æ—¥å…ƒ (JPY)</option>
                        <option value="CNY" selected>ğŸ‡¨ğŸ‡³ äººæ°‘å¸ (CNY)</option>
                        <option value="HKD">ğŸ‡­ğŸ‡° æ¸¯å¸ (HKD)</option>
                        <option value="KRW">ğŸ‡°ğŸ‡· éŸ©å…ƒ (KRW)</option>
                        <option value="SGD">ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡å…ƒ (SGD)</option>
                        <option value="AUD">ğŸ‡¦ğŸ‡º æ¾³å…ƒ (AUD)</option>
                        <option value="CAD">ğŸ‡¨ğŸ‡¦ åŠ å…ƒ (CAD)</option>
                        <option value="CHF">ğŸ‡¨ğŸ‡­ ç‘å£«æ³•éƒ (CHF)</option>
                        <option value="NZD">ğŸ‡³ğŸ‡¿ æ–°è¥¿å…°å…ƒ (NZD)</option>
                        <option value="INR">ğŸ‡®ğŸ‡³ å°åº¦å¢æ¯” (INR)</option>
                        <option value="THB">ğŸ‡¹ğŸ‡­ æ³°é“¢ (THB)</option>
                        <option value="MYR">ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºšæ—å‰ç‰¹ (MYR)</option>
                    </select>
                    <input type="number" id="amount" class="amount-input" placeholder="è¾“å…¥é‡‘é¢" value="100" min="0" step="0.01">
                </div>
                
                <button class="swap-button" onclick="swapCurrencies()" title="äº¤æ¢å¸ç§">
                    â‡„
                </button>
                
                <div class="input-group">
                    <label for="toCurrency">ç›®æ ‡å¸ç§</label>
                    <select id="toCurrency" class="currency-select">
                        <option value="USD" selected>ğŸ‡ºğŸ‡¸ ç¾å…ƒ (USD)</option>
                        <option value="EUR">ğŸ‡ªğŸ‡º æ¬§å…ƒ (EUR)</option>
                        <option value="GBP">ğŸ‡¬ğŸ‡§ è‹±é•‘ (GBP)</option>
                        <option value="JPY">ğŸ‡¯ğŸ‡µ æ—¥å…ƒ (JPY)</option>
                        <option value="CNY">ğŸ‡¨ğŸ‡³ äººæ°‘å¸ (CNY)</option>
                        <option value="HKD">ğŸ‡­ğŸ‡° æ¸¯å¸ (HKD)</option>
                        <option value="KRW">ğŸ‡°ğŸ‡· éŸ©å…ƒ (KRW)</option>
                        <option value="SGD">ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡å…ƒ (SGD)</option>
                        <option value="AUD">ğŸ‡¦ğŸ‡º æ¾³å…ƒ (AUD)</option>
                        <option value="CAD">ğŸ‡¨ğŸ‡¦ åŠ å…ƒ (CAD)</option>
                        <option value="CHF">ğŸ‡¨ğŸ‡­ ç‘å£«æ³•éƒ (CHF)</option>
                        <option value="NZD">ğŸ‡³ğŸ‡¿ æ–°è¥¿å…°å…ƒ (NZD)</option>
                        <option value="INR">ğŸ‡®ğŸ‡³ å°åº¦å¢æ¯” (INR)</option>
                        <option value="THB">ğŸ‡¹ğŸ‡­ æ³°é“¢ (THB)</option>
                        <option value="MYR">ğŸ‡²ğŸ‡¾ é©¬æ¥è¥¿äºšæ—å‰ç‰¹ (MYR)</option>
                    </select>
                    <input type="number" id="result" class="amount-input" placeholder="è½¬æ¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ" readonly>
                </div>
            </div>
            
            <div class="button-group">
                <button class="convert-button" onclick="convertCurrency()">
                    ğŸ”„ è½¬æ¢æ±‡ç‡
                </button>
                <button class="refresh-rates-btn" onclick="fetchExchangeRates()" title="åˆ·æ–°æ±‡ç‡æ•°æ®">
                    ğŸ”„ åˆ·æ–°æ±‡ç‡
                </button>
            </div>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>æ­£åœ¨è·å–æœ€æ–°æ±‡ç‡...</p>
            </div>
            
            <div class="result-section" id="resultSection" style="display: none;">
                <div class="result-amount" id="resultAmount">0.00</div>
                <div class="result-details" id="resultDetails"></div>
            </div>
            
            <div class="rate-info" id="rateInfo" style="display: none;">
                <h3>ğŸ“Š å½“å‰æ±‡ç‡ä¿¡æ¯</h3>
                <div class="rate-value" id="rateValue"></div>
                <div id="rateDetails"></div>
            </div>
            
            <div class="error" id="error" style="display: none;"></div>
            
            <div class="last-updated" id="lastUpdated"></div>
            
            <!-- å†å²è®°å½•åŒºåŸŸ -->
            <div class="history-section">
                <div class="history-header">
                    <h3>ğŸ“‹ è½¬æ¢å†å²è®°å½•</h3>
                    <div class="history-controls">
                        <button class="clear-history-btn" onclick="clearAllHistory()" title="æ¸…ç©ºæ‰€æœ‰è®°å½•">
                            ğŸ—‘ï¸ æ¸…ç©º
                        </button>
                        <button class="toggle-history-btn" onclick="toggleHistory()" title="æ˜¾ç¤º/éšè—å†å²è®°å½•">
                            ğŸ“– éšè—
                        </button>
                    </div>
                </div>
                <div class="history-list" id="historyList">
                    <div class="history-empty" id="historyEmpty">
                        <p>æš‚æ— è½¬æ¢è®°å½•</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let exchangeRates = {};
        let lastUpdateTime = null;

        // å¸ç§ä¿¡æ¯
        const currencyInfo = {
            'USD': { name: 'ç¾å…ƒ', symbol: '$', flag: 'ğŸ‡ºğŸ‡¸' },
            'EUR': { name: 'æ¬§å…ƒ', symbol: 'â‚¬', flag: 'ğŸ‡ªğŸ‡º' },
            'GBP': { name: 'è‹±é•‘', symbol: 'Â£', flag: 'ğŸ‡¬ğŸ‡§' },
            'JPY': { name: 'æ—¥å…ƒ', symbol: 'Â¥', flag: 'ğŸ‡¯ğŸ‡µ' },
            'CNY': { name: 'äººæ°‘å¸', symbol: 'Â¥', flag: 'ğŸ‡¨ğŸ‡³' },
            'HKD': { name: 'æ¸¯å¸', symbol: 'HK$', flag: 'ğŸ‡­ğŸ‡°' },
            'KRW': { name: 'éŸ©å…ƒ', symbol: 'â‚©', flag: 'ğŸ‡°ğŸ‡·' },
            'SGD': { name: 'æ–°åŠ å¡å…ƒ', symbol: 'S$', flag: 'ğŸ‡¸ğŸ‡¬' },
            'AUD': { name: 'æ¾³å…ƒ', symbol: 'A$', flag: 'ğŸ‡¦ğŸ‡º' },
            'CAD': { name: 'åŠ å…ƒ', symbol: 'C$', flag: 'ğŸ‡¨ğŸ‡¦' },
            'CHF': { name: 'ç‘å£«æ³•éƒ', symbol: 'CHF', flag: 'ğŸ‡¨ğŸ‡­' },
            'NZD': { name: 'æ–°è¥¿å…°å…ƒ', symbol: 'NZ$', flag: 'ğŸ‡³ğŸ‡¿' },
            'INR': { name: 'å°åº¦å¢æ¯”', symbol: 'â‚¹', flag: 'ğŸ‡®ğŸ‡³' },
            'THB': { name: 'æ³°é“¢', symbol: 'à¸¿', flag: 'ğŸ‡¹ğŸ‡­' },
            'MYR': { name: 'é©¬æ¥è¥¿äºšæ—å‰ç‰¹', symbol: 'RM', flag: 'ğŸ‡²ğŸ‡¾' }
        };

        // è·å–æ±‡ç‡æ•°æ®
        async function fetchExchangeRates() {
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const convertButton = document.querySelector('.convert-button');
            
            if (loading) loading.style.display = 'block';
            if (error) error.style.display = 'none';
            if (convertButton) convertButton.disabled = true;
            
            // ç¦ç”¨åˆ·æ–°æŒ‰é’®
            const refreshButton = document.querySelector('.refresh-rates-btn');
            if (refreshButton) {
                refreshButton.disabled = true;
            }

            try {
                // å°è¯•å¤šä¸ªæ±‡ç‡API
                const apis = [
                    'https://api.exchangerate-api.com/v4/latest/USD',
                    'https://api.exchangerate.host/latest?base=USD',
                    'https://api.fxratesapi.com/latest?base=USD'
                ];
                
                let success = false;
                for (const apiUrl of apis) {
                    try {
                        console.log(`å°è¯•ä» ${apiUrl} è·å–æ±‡ç‡æ•°æ®...`);
                        const response = await fetch(apiUrl, {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json',
                            },
                            timeout: 10000 // 10ç§’è¶…æ—¶
                        });
                        
                        if (!response.ok) {
                            console.warn(`API ${apiUrl} è¿”å›é”™è¯¯: ${response.status}`);
                            continue;
                        }
                        
                        const data = await response.json();
                        
                        // éªŒè¯æ•°æ®æ ¼å¼
                        if (data && data.rates && typeof data.rates === 'object') {
                            exchangeRates = data.rates;
                            lastUpdateTime = new Date();
                            success = true;
                            
                            // æ›´æ–°æœ€åæ›´æ–°æ—¶é—´æ˜¾ç¤º
                            updateLastUpdatedTime();
                            
                            console.log('æ±‡ç‡æ•°æ®è·å–æˆåŠŸ:', exchangeRates);
                            console.log(`æ•°æ®æ¥æº: ${apiUrl}`);
                            break;
                        } else {
                            console.warn(`API ${apiUrl} è¿”å›çš„æ•°æ®æ ¼å¼ä¸æ­£ç¡®`);
                        }
                    } catch (apiErr) {
                        console.warn(`API ${apiUrl} è¯·æ±‚å¤±è´¥:`, apiErr);
                        continue;
                    }
                }
                
                if (!success) {
                    throw new Error('æ‰€æœ‰æ±‡ç‡APIéƒ½æ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
                }
                
            } catch (err) {
                console.error('è·å–æ±‡ç‡å¤±è´¥:', err);
                showError(`æ— æ³•è·å–æœ€æ–°æ±‡ç‡æ•°æ®: ${err.message}`);
            } finally {
                if (loading) loading.style.display = 'none';
                if (convertButton) convertButton.disabled = false;
                
                // å¯ç”¨åˆ·æ–°æŒ‰é’®
                const refreshButton = document.querySelector('.refresh-rates-btn');
                if (refreshButton) {
                    refreshButton.disabled = false;
                }
            }
        }

        // è½¬æ¢æ±‡ç‡
        async function convertCurrency() {
            const fromCurrencyElement = document.getElementById('fromCurrency');
            const toCurrencyElement = document.getElementById('toCurrency');
            const amountElement = document.getElementById('amount');
            
            if (!fromCurrencyElement || !toCurrencyElement || !amountElement) {
                showError('é¡µé¢å…ƒç´ åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                return;
            }
            
            const fromCurrency = fromCurrencyElement.value;
            const toCurrency = toCurrencyElement.value;
            const amount = parseFloat(amountElement.value);
            
            if (!amount || amount <= 0) {
                showError('è¯·è¾“å…¥æœ‰æ•ˆçš„é‡‘é¢');
                return;
            }
            
            if (fromCurrency === toCurrency) {
                showError('æºå¸ç§å’Œç›®æ ‡å¸ç§ä¸èƒ½ç›¸åŒ');
                return;
            }
            
            // å¦‚æœæ²¡æœ‰æ±‡ç‡æ•°æ®ï¼Œå…ˆè·å–
            if (Object.keys(exchangeRates).length === 0) {
                await fetchExchangeRates();
            }
            
            // è°ƒè¯•ä¿¡æ¯
            console.log('å½“å‰æ±‡ç‡æ•°æ®:', exchangeRates);
            console.log('è½¬æ¢å‚æ•°:', { fromCurrency, toCurrency, amount });
            
            try {
                let result;
                let rate;
                
                if (fromCurrency === 'USD') {
                    // ä»ç¾å…ƒè½¬æ¢
                    rate = exchangeRates[toCurrency];
                    if (!rate) {
                        throw new Error(`æ— æ³•è·å– ${toCurrency} çš„æ±‡ç‡æ•°æ®`);
                    }
                    result = amount * rate;
                } else if (toCurrency === 'USD') {
                    // è½¬æ¢ä¸ºç¾å…ƒ
                    const fromRate = exchangeRates[fromCurrency];
                    if (!fromRate) {
                        throw new Error(`æ— æ³•è·å– ${fromCurrency} çš„æ±‡ç‡æ•°æ®`);
                    }
                    rate = 1 / fromRate;
                    result = amount * rate;
                } else {
                    // é€šè¿‡ç¾å…ƒä¸­è½¬
                    const fromRate = exchangeRates[fromCurrency];
                    const toRate = exchangeRates[toCurrency];
                    if (!fromRate) {
                        throw new Error(`æ— æ³•è·å– ${fromCurrency} çš„æ±‡ç‡æ•°æ®`);
                    }
                    if (!toRate) {
                        throw new Error(`æ— æ³•è·å– ${toCurrency} çš„æ±‡ç‡æ•°æ®`);
                    }
                    rate = toRate / fromRate;
                    result = amount * rate;
                }
                
                // æ£€æŸ¥è®¡ç®—ç»“æœæ˜¯å¦æœ‰æ•ˆ
                if (isNaN(result) || !isFinite(result)) {
                    throw new Error('è®¡ç®—ç»“æœæ— æ•ˆ');
                }
                
                displayResult(amount, fromCurrency, result, toCurrency, rate);
                
            } catch (err) {
                console.error('è½¬æ¢å¤±è´¥:', err);
                showError(`æ±‡ç‡è½¬æ¢å¤±è´¥: ${err.message}`);
            }
        }

        // æ˜¾ç¤ºè½¬æ¢ç»“æœ
        function displayResult(amount, fromCurrency, result, toCurrency, rate) {
            const resultSection = document.getElementById('resultSection');
            const resultAmount = document.getElementById('resultAmount');
            const resultDetails = document.getElementById('resultDetails');
            const rateInfo = document.getElementById('rateInfo');
            const rateValue = document.getElementById('rateValue');
            const rateDetails = document.getElementById('rateDetails');
            const resultInput = document.getElementById('result');
            
            // æ ¼å¼åŒ–æ•°å­—
            const formattedAmount = formatNumber(amount);
            const formattedResult = formatNumber(result);
            const formattedRate = formatNumber(rate, 6);
            
            // æ˜¾ç¤ºç»“æœ
            if (resultAmount) resultAmount.textContent = `${currencyInfo[toCurrency].symbol}${formattedResult}`;
            if (resultDetails) resultDetails.textContent = `${currencyInfo[fromCurrency].flag} ${formattedAmount} ${fromCurrency} = ${currencyInfo[toCurrency].flag} ${formattedResult} ${toCurrency}`;
            
            // åœ¨ç»“æœè¾“å…¥æ¡†ä¸­å¡«å…¥è½¬æ¢åçš„æ•°å€¼
            if (resultInput) resultInput.value = result.toFixed(2);
            
            // æ˜¾ç¤ºæ±‡ç‡ä¿¡æ¯
            if (rateValue) rateValue.textContent = `1 ${fromCurrency} = ${formattedRate} ${toCurrency}`;
            if (rateDetails) rateDetails.textContent = `1 ${toCurrency} = ${formatNumber(1/rate, 6)} ${fromCurrency}`;
            
            if (resultSection) resultSection.style.display = 'block';
            if (rateInfo) rateInfo.style.display = 'block';
            
            // ä¿å­˜åˆ°å†å²è®°å½•
            saveToHistory(amount, fromCurrency, result, toCurrency, rate);
            
            // éšè—é”™è¯¯ä¿¡æ¯
            const errorElement = document.getElementById('error');
            if (errorElement) errorElement.style.display = 'none';
        }

        // äº¤æ¢å¸ç§
        function swapCurrencies() {
            const fromCurrency = document.getElementById('fromCurrency');
            const toCurrency = document.getElementById('toCurrency');
            const amount = document.getElementById('amount');
            
            if (!fromCurrency || !toCurrency || !amount) return;
            
            const tempValue = fromCurrency.value;
            fromCurrency.value = toCurrency.value;
            toCurrency.value = tempValue;
            
            // å¦‚æœæœ‰è½¬æ¢ç»“æœï¼Œè‡ªåŠ¨é‡æ–°è½¬æ¢
            if (Object.keys(exchangeRates).length > 0 && amount.value) {
                convertCurrency();
            }
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            const error = document.getElementById('error');
            if (error) {
                error.textContent = message;
                error.style.display = 'block';
            }
            
            // éšè—ç»“æœåŒºåŸŸ
            const resultSection = document.getElementById('resultSection');
            const rateInfo = document.getElementById('rateInfo');
            if (resultSection) resultSection.style.display = 'none';
            if (rateInfo) rateInfo.style.display = 'none';
        }

        // æ ¼å¼åŒ–æ•°å­—
        function formatNumber(num, decimals = 2) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(decimals) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(decimals) + 'K';
            } else {
                return num.toFixed(decimals);
            }
        }

        // æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
        function updateLastUpdatedTime() {
            if (lastUpdateTime) {
                const timeString = lastUpdateTime.toLocaleString('zh-CN');
                const lastUpdatedElement = document.getElementById('lastUpdated');
                if (lastUpdatedElement) {
                    lastUpdatedElement.textContent = `æœ€åæ›´æ–°: ${timeString}`;
                }
            }
        }

        // è¾“å…¥æ¡†å˜åŒ–æ—¶è‡ªåŠ¨è½¬æ¢
        const amountInput = document.getElementById('amount');
        const fromCurrencySelect = document.getElementById('fromCurrency');
        const toCurrencySelect = document.getElementById('toCurrency');
        
        if (amountInput) {
            amountInput.addEventListener('input', function() {
                if (this.value && Object.keys(exchangeRates).length > 0) {
                    convertCurrency();
                }
            });
        }

        if (fromCurrencySelect) {
            fromCurrencySelect.addEventListener('change', function() {
                const amountValue = document.getElementById('amount');
                if (amountValue && amountValue.value && Object.keys(exchangeRates).length > 0) {
                    convertCurrency();
                }
            });
        }

        if (toCurrencySelect) {
            toCurrencySelect.addEventListener('change', function() {
                const amountValue = document.getElementById('amount');
                if (amountValue && amountValue.value && Object.keys(exchangeRates).length > 0) {
                    convertCurrency();
                }
            });
        }

        // å†å²è®°å½•ç®¡ç†
        const HISTORY_KEY = 'exchangeRateHistory';
        const MAX_HISTORY = 20;

        // ä¿å­˜è½¬æ¢è®°å½•åˆ°å†å²
        function saveToHistory(amount, fromCurrency, result, toCurrency, rate) {
            const historyItem = {
                id: Date.now(),
                timestamp: new Date().toLocaleString('zh-CN'),
                amount: amount,
                fromCurrency: fromCurrency,
                result: result,
                toCurrency: toCurrency,
                rate: rate
            };

            let history = getHistory();
            history.unshift(historyItem); // æ·»åŠ åˆ°å¼€å¤´

            // é™åˆ¶æœ€å¤šä¿å­˜20æ¡è®°å½•
            if (history.length > MAX_HISTORY) {
                history = history.slice(0, MAX_HISTORY);
            }

            localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
            updateHistoryDisplay();
        }

        // è·å–å†å²è®°å½•
        function getHistory() {
            const historyStr = localStorage.getItem(HISTORY_KEY);
            return historyStr ? JSON.parse(historyStr) : [];
        }

        // æ›´æ–°å†å²è®°å½•æ˜¾ç¤º
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            const historyEmpty = document.getElementById('historyEmpty');
            const history = getHistory();

            if (!historyList) return;

            if (history.length === 0) {
                if (historyEmpty) historyEmpty.style.display = 'block';
                return;
            }

            if (historyEmpty) historyEmpty.style.display = 'none';
            historyList.innerHTML = '';

            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div class="history-content">
                        <div class="history-conversion">
                            ${currencyInfo[item.fromCurrency].flag} ${formatNumber(item.amount)} ${item.fromCurrency} â†’ ${currencyInfo[item.toCurrency].flag} ${formatNumber(item.result)} ${item.toCurrency}
                        </div>
                        <div class="history-details">
                            æ±‡ç‡: 1 ${item.fromCurrency} = ${formatNumber(item.rate, 6)} ${item.toCurrency} | ${item.timestamp}
                        </div>
                    </div>
                    <div class="history-actions">
                        <button class="history-action-btn delete" onclick="deleteHistoryItem(${item.id})" title="åˆ é™¤æ­¤è®°å½•">
                            åˆ é™¤
                        </button>
                    </div>
                `;
                historyList.appendChild(historyItem);
            });
        }


        // åˆ é™¤å•æ¡å†å²è®°å½•
        function deleteHistoryItem(id) {
            let history = getHistory();
            history = history.filter(h => h.id !== id);
            localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
            updateHistoryDisplay();
        }

        // æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•
        function clearAllHistory() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•å—ï¼Ÿ')) {
                localStorage.removeItem(HISTORY_KEY);
                updateHistoryDisplay();
            }
        }

        // åˆ‡æ¢å†å²è®°å½•æ˜¾ç¤º
        function toggleHistory() {
            const historyList = document.getElementById('historyList');
            const toggleBtn = document.querySelector('.toggle-history-btn');
            
            if (!historyList || !toggleBtn) return;
            
            if (historyList.style.display === 'none') {
                historyList.style.display = 'block';
                toggleBtn.textContent = 'ğŸ“– éšè—';
            } else {
                historyList.style.display = 'none';
                toggleBtn.textContent = 'ğŸ“– å†å²';
            }
        }

        // é¡µé¢åŠ è½½æ—¶è·å–æ±‡ç‡æ•°æ®å’Œå†å²è®°å½•
        window.addEventListener('load', function() {
            fetchExchangeRates();
            updateHistoryDisplay();
        });

        // å®šæœŸæ›´æ–°æ±‡ç‡ï¼ˆæ¯5åˆ†é’Ÿï¼‰
        setInterval(fetchExchangeRates, 5 * 60 * 1000);
    </script>
</body>
</html>
