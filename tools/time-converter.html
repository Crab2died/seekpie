<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¶é—´è½¬æ¢å·¥å…· - åœ¨çº¿æ—¶åŒºè½¬æ¢ã€æ—¶é—´æˆ³è½¬æ¢å·¥å…· | æ”¯æŒå¤ä»¤æ—¶è‡ªåŠ¨è¯†åˆ«</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="å…è´¹åœ¨çº¿æ—¶é—´è½¬æ¢å·¥å…·ï¼Œæ”¯æŒå…¨çƒæ—¶åŒºè½¬æ¢ã€æ—¶é—´æˆ³è½¬æ¢ã€å¤ä»¤æ—¶è‡ªåŠ¨è¯†åˆ«ã€‚è¦†ç›–ç¾æ´²ã€æ¬§æ´²ã€äºšæ´²ã€å¤§æ´‹æ´²ç­‰ä¸»è¦åŸå¸‚æ—¶åŒºï¼Œæ“ä½œç®€å•ï¼Œè½¬æ¢ç²¾ç¡®ï¼Œæ”¯æŒç§»åŠ¨ç«¯ã€‚">
    <meta name="keywords" content="æ—¶é—´è½¬æ¢,æ—¶åŒºè½¬æ¢,æ—¶é—´æˆ³è½¬æ¢,å¤ä»¤æ—¶,UTCæ—¶é—´,åŒ—äº¬æ—¶é—´,çº½çº¦æ—¶é—´,æ—¶é—´è®¡ç®—å™¨,åœ¨çº¿æ—¶é—´å·¥å…·">
    <meta name="author" content="å¤šåŠŸèƒ½å·¥å…·ç®±">
    <meta name="robots" content="index, follow">
    <meta name="language" content="zh-CN">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.seekpie.com/tools/time-converter.html">
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "æ—¶é—´è½¬æ¢å·¥å…·",
      "description": "å…è´¹åœ¨çº¿æ—¶é—´è½¬æ¢å·¥å…·ï¼Œæ”¯æŒå…¨çƒæ—¶åŒºè½¬æ¢ã€æ—¶é—´æˆ³è½¬æ¢ã€å¤ä»¤æ—¶è‡ªåŠ¨è¯†åˆ«",
      "url": "https://www.seekpie.com/tools/time-converter.html",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "CNY"
      },
      "featureList": [
        "å…¨çƒæ—¶åŒºè½¬æ¢",
        "æ—¶é—´æˆ³è½¬æ¢",
        "å¤ä»¤æ—¶è‡ªåŠ¨è¯†åˆ«",
        "æœ¬åœ°æ—¶é—´æ˜¾ç¤º",
        "UTCæ—¶é—´æ˜¾ç¤º",
        "è½¬æ¢å†å²è®°å½•"
      ]
    }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: clamp(10px, 2vw, 20px);
            font-size: clamp(14px, 1.5vw, 16px);
        }

        .container {
            max-width: min(1400px, 70vw);
            margin: 0 auto;
            background: white;
            border-radius: clamp(15px, 2vw, 20px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: clamp(20px, 4vw, 30px);
            text-align: center;
        }

        .header h1 {
            font-size: clamp(1.5em, 3.5vw, 2.5em);
            margin-bottom: clamp(8px, 1.5vw, 10px);
            font-weight: 300;
        }

        .header p {
            font-size: clamp(0.9em, 2vw, 1.1em);
            opacity: 0.9;
        }

        .content {
            padding: clamp(20px, 4vw, 40px);
        }

        .current-time-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: clamp(12px, 2vw, 15px);
            padding: clamp(15px, 3vw, 20px);
            margin-bottom: clamp(20px, 3vw, 30px);
            color: white;
        }

        .current-time-section h2 {
            color: white;
            margin-bottom: clamp(15px, 3vw, 25px);
            font-size: clamp(1.2em, 2.5vw, 1.5em);
            text-align: center;
        }

        .current-time-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
            gap: clamp(15px, 2.5vw, 20px);
        }

        .current-time-item {
            background: rgba(255, 255, 255, 0.15);
            padding: clamp(15px, 2.5vw, 20px);
            border-radius: clamp(10px, 1.5vw, 12px);
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .current-time-item h4 {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: clamp(10px, 2vw, 15px);
            font-size: clamp(1em, 2vw, 1.2em);
            font-weight: 600;
        }

        .current-time-value {
            font-size: clamp(1.2em, 2.5vw, 1.8em);
            font-weight: bold;
            color: white;
            font-family: 'Courier New', monospace;
            margin-bottom: clamp(8px, 1.5vw, 10px);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .current-timestamp {
            background: rgba(255, 255, 255, 0.2);
            padding: clamp(6px, 1.5vw, 8px) clamp(10px, 2vw, 12px);
            border-radius: 6px;
            font-size: clamp(0.8em, 1.5vw, 0.9em);
            color: rgba(255, 255, 255, 0.9);
            font-family: 'Courier New', monospace;
        }

        .converter {
            background: #f8f9fa;
            border-radius: clamp(12px, 2vw, 15px);
            padding: clamp(15px, 3vw, 20px);
        }

        .converter h2 {
            color: #333;
            margin-bottom: clamp(20px, 3vw, 30px);
            font-size: clamp(1.3em, 2.8vw, 1.8em);
            text-align: center;
        }

        .form-group {
            margin-bottom: clamp(20px, 3vw, 25px);
        }

        .form-group label {
            display: block;
            margin-bottom: clamp(6px, 1.5vw, 8px);
            font-weight: 600;
            color: #555;
            font-size: clamp(14px, 1.5vw, 16px);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr));
            gap: clamp(15px, 2.5vw, 20px);
        }

        .form-control {
            width: 100%;
            padding: clamp(10px, 1.5vw, 12px) clamp(12px, 2vw, 15px);
            border: 2px solid #e1e5e9;
            border-radius: clamp(6px, 1vw, 8px);
            font-size: clamp(14px, 1.5vw, 16px);
            transition: all 0.3s ease;
            /* ç¡®ä¿åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè§¦æ‘¸ç›®æ ‡è¶³å¤Ÿå¤§ */
            min-height: 44px;
        }

        .form-control:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }


        .datetime-input {
            display: flex;
            gap: 10px;
            align-items: end;
            flex-wrap: wrap;
        }

        .datetime-input input[type="date"],
        .datetime-input input[type="time"] {
            flex: 1;
            min-width: 120px;
        }

        .datetime-input input[type="number"] {
            width: 80px;
            text-align: center;
        }

        .datetime-input input {
            flex: 1;
        }

        .btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: clamp(10px, 1.5vw, 12px) clamp(20px, 3vw, 25px);
            border-radius: clamp(6px, 1vw, 8px);
            font-size: clamp(14px, 1.5vw, 16px);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            /* ç¡®ä¿è§¦æ‘¸ç›®æ ‡è¶³å¤Ÿå¤§ */
            min-height: 44px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        .result {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: clamp(12px, 2vw, 15px);
            padding: clamp(15px, 3vw, 20px);
            margin-top: clamp(15px, 2.5vw, 20px);
            display: none;
        }

        .result.show {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        /* å†å²è®°å½•æ ·å¼ */
        .history-section {
            margin-top: clamp(20px, 3vw, 30px);
            background: #f8f9fa;
            border-radius: clamp(12px, 2vw, 15px);
            padding: clamp(15px, 3vw, 20px);
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: clamp(12px, 2vw, 15px);
            flex-wrap: wrap;
            gap: clamp(10px, 2vw, 15px);
        }

        .history-header h3 {
            color: #2c3e50;
            margin: 0;
            font-size: clamp(1.1em, 2.2vw, 1.3em);
        }

        .history-controls {
            display: flex;
            gap: clamp(8px, 1.5vw, 10px);
            flex-wrap: wrap;
        }

        .clear-history-btn, .toggle-history-btn {
            padding: clamp(6px, 1.5vw, 8px) clamp(12px, 2vw, 16px);
            background: #dc3545;
            color: white;
            border: none;
            border-radius: clamp(6px, 1vw, 8px);
            cursor: pointer;
            font-size: clamp(0.85em, 1.5vw, 0.95em);
            transition: all 0.3s ease;
            /* ç¡®ä¿è§¦æ‘¸ç›®æ ‡è¶³å¤Ÿå¤§ */
            min-height: 36px;
        }

        .toggle-history-btn {
            background: #3498db;
        }

        .clear-history-btn:hover {
            background: #c82333;
            transform: scale(1.05);
        }

        .toggle-history-btn:hover {
            background: #2980b9;
            transform: scale(1.05);
        }

        .history-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            border-color: #4facfe;
            box-shadow: 0 4px 12px rgba(79, 172, 254, 0.2);
        }

        .history-content {
            flex: 1;
        }

        .history-conversion {
            font-size: 1.1em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .history-details {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .time-conversion {
            margin-bottom: 5px;
            font-weight: 500;
        }

        .timestamp-info {
            display: flex;
            align-items: center;
            margin-bottom: 3px;
            gap: 8px;
        }

        .timestamp-label {
            color: #7f8c8d;
            font-size: 0.85em;
        }

        .timestamp-value {
            color: #95a5a6;
            font-size: 0.8em;
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid #e9ecef;
        }


        .history-actions {
            display: flex;
            gap: 8px;
        }

        .history-action-btn {
            padding: 4px 10px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .history-action-btn:hover {
            background: #c82333;
        }

        .history-action-btn.delete {
            background: #dc3545;
        }

        .history-action-btn.delete:hover {
            background: #c82333;
        }

        .history-empty {
            text-align: center;
            color: #7f8c8d;
            padding: 20px;
            font-style: italic;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result h3 {
            color: #333;
            margin-bottom: clamp(15px, 2.5vw, 20px);
            font-size: clamp(1.2em, 2.5vw, 1.5em);
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
            gap: clamp(15px, 2.5vw, 20px);
        }

        .result-item {
            background: rgba(255, 255, 255, 0.9);
            padding: clamp(15px, 2.5vw, 20px);
            border-radius: clamp(8px, 1.5vw, 10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .result-item h4 {
            color: #666;
            margin-bottom: clamp(8px, 1.5vw, 10px);
            font-size: clamp(1em, 1.8vw, 1.1em);
        }

        .result-value {
            font-size: clamp(1em, 2vw, 1.2em);
            font-weight: bold;
            color: #333;
            font-family: 'Courier New', monospace;
            word-break: break-all;
        }

        .timestamp {
            background: #f0f0f0;
            padding: clamp(8px, 1.5vw, 10px);
            border-radius: clamp(4px, 0.8vw, 5px);
            margin-top: clamp(4px, 0.8vw, 5px);
            font-size: clamp(0.9em, 1.5vw, 1em);
        }

        .timezone-info {
            margin-top: clamp(8px, 1.5vw, 10px);
        }

        .dst-status {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #333;
            padding: clamp(6px, 1.2vw, 8px) clamp(10px, 1.8vw, 12px);
            border-radius: clamp(4px, 0.8vw, 6px);
            margin-top: clamp(6px, 1.2vw, 8px);
            font-size: clamp(12px, 1.5vw, 14px);
            font-weight: 600;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .dst-status.dst-active {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #2c3e50;
        }

        .dst-status.dst-inactive {
            background: linear-gradient(135deg, #d3d3d3 0%, #f0f0f0 100%);
            color: #666;
        }

        .form-group small {
            color: #666;
            font-size: 0.9em;
        }

        /* ç¡®ä¿æºæ—¶åŒºå’Œç›®æ ‡æ—¶åŒºæ ·å¼å®Œå…¨å¯¹é½ */
        .form-row .form-group {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .form-row .form-group label {
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .form-row .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background-color: white;
        }

        .form-row .form-group select:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        /* ç¡®ä¿ä¸¤ä¸ªæ—¶åŒºé€‰æ‹©å™¨é«˜åº¦ä¸€è‡´ */
        .form-row .form-group {
            min-height: 80px;
        }

        .form-row .form-group select {
            min-height: 48px;
            box-sizing: border-box;
        }

        /* æ—¶åŒºé€‰æ‹©å™¨é€‰é¡¹æ ·å¼ */
        .form-row .form-group select option {
            padding: 8px 12px;
            font-size: 16px;
        }

        /* è¶…å¤§å±å¹•ä¼˜åŒ– */
        @media (min-width: 1920px) {
            body {
                font-size: 18px;
            }
            
            .container {
                max-width: 1400px;
            }
        }

        /* å¤§å±å¹•ä¼˜åŒ– (æ¡Œé¢) */
        @media (min-width: 1200px) and (max-width: 1919px) {
            .form-row {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* å¹³æ¿æ¨ªå± */
        @media (min-width: 769px) and (max-width: 1199px) {
            .current-time-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr 1fr;
            }
            
            .result-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* å¹³æ¿ç«–å±å’Œç§»åŠ¨ç«¯æ¨ªå± */
        @media (max-width: 768px) {
            .container {
                max-width: 100%;
            }

            /* å¼ºåˆ¶å•åˆ—å¸ƒå±€ */
            .current-time-grid {
                grid-template-columns: 1fr !important;
            }
            
            .form-row {
                grid-template-columns: 1fr !important;
            }
            
            .result-grid {
                grid-template-columns: 1fr !important;
            }
            
            /* æ—¥æœŸæ—¶é—´è¾“å…¥å‚ç›´æ’åˆ— */
            .datetime-input {
                flex-direction: column;
                align-items: stretch;
            }

            .datetime-input input[type="date"],
            .datetime-input input[type="time"],
            .datetime-input input[type="number"] {
                width: 100%;
                min-width: 100%;
            }

            /* æŒ‰é’®å…¨å®½ */
            .btn {
                width: 100%;
            }

            /* å†å²è®°å½•å‚ç›´å¸ƒå±€ */
            .history-section {
                padding: clamp(12px, 2vw, 15px);
            }

            .history-header {
                flex-direction: column;
                align-items: stretch;
            }

            .history-controls {
                justify-content: stretch;
            }

            .clear-history-btn, .toggle-history-btn {
                flex: 1;
            }

            .history-list {
                max-height: 400px;
            }

            .history-item {
                flex-direction: column;
                align-items: stretch;
                gap: clamp(8px, 1.5vw, 10px);
            }

            .history-actions {
                justify-content: center;
            }

            .timestamp-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
            }
        }

        /* å°å±æ‰‹æœºä¼˜åŒ– */
        @media (max-width: 480px) {
            /* é’ˆå¯¹å°å±å¹•çš„æœ€å°å­—ä½“å¤§å° */
            body {
                font-size: 14px;
            }
            
            /* å‡å°æŒ‰é’®å†…è¾¹è·ä»¥é€‚åº”å°å± */
            .btn {
                padding: 10px 15px;
            }
            
            /* å†å²è®°å½•é¡¹æ›´ç´§å‡‘ */
            .history-item {
                padding: 10px;
            }
            
            .history-list {
                max-height: 300px;
            }
        }

        /* è¶…å°å±å¹•ä¼˜åŒ– */
        @media (max-width: 360px) {
            body {
                font-size: 13px;
            }
            
            /* è¿›ä¸€æ­¥å‡å°é—´è· */
            .content {
                padding: 15px;
            }
            
            .btn {
                padding: 8px 12px;
                font-size: 13px;
            }
        }

        /* æ¨ªå±æ¨¡å¼ä¼˜åŒ–ï¼ˆç§»åŠ¨è®¾å¤‡ï¼‰ */
        @media (max-width: 768px) and (orientation: landscape) {
            body {
                padding: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.5em;
                margin-bottom: 5px;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .content {
                padding: 15px;
            }
            
            .current-time-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr 1fr;
            }
            
            .result-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .history-list {
                max-height: 200px;
            }
        }

        /* æ‰“å°æ ·å¼ä¼˜åŒ– */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                max-width: 100%;
            }
            
            .btn, .history-controls {
                display: none;
            }
            
            .result {
                display: block !important;
                background: white;
                border: 1px solid #ddd;
            }
        }

        /* è¿”å›å·¥å…·ç®±æŒ‰é’®æ ·å¼ */
        .back-to-toolbox-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            color: #667eea;
            border: 2px solid #667eea;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 10000;
        }

        .back-to-toolbox-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            .back-to-toolbox-btn {
                display: none;
            }
        }
    </style>
</head>
<body>
    <a href="tools.html" class="back-to-toolbox-btn">
        <span>ğŸ”§</span>
        <span>è¿”å›å·¥å…·ç®±</span>
    </a>
    <div class="container">
        <div class="header">
            <h1>ğŸ• æ—¶é—´è½¬æ¢å·¥å…·</h1>
            <p>æ—¶åŒºè½¬æ¢å·¥å…·ï¼Œæ”¯æŒæ—¶åŒºè½¬æ¢å’Œæ—¶é—´æˆ³è½¬æ¢</p>
        </div>

        <div class="content">
            <!-- å½“å‰æ—¶é—´å±•ç¤º -->
            <div class="current-time-section">
                <div class="current-time-grid">
                    <div class="current-time-item">
                        <h4>æœ¬åœ°æ—¶é—´</h4>
                        <div class="current-time-value" id="localTime">--</div>
                        <div class="current-timestamp" id="localTimestamp">--</div>
                    </div>
                    <div class="current-time-item">
                        <h4>UTCæ—¶é—´</h4>
                        <div class="current-time-value" id="utcTime">--</div>
                        <div class="current-timestamp" id="utcTimestamp">--</div>
                    </div>
                </div>
            </div>

            <!-- æ—¶é—´è½¬æ¢å™¨ -->
            <div class="converter">
                <h2>ğŸ”„ æ—¶åŒºè½¬æ¢</h2>
                <form id="timeConverterForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="sourceTimezone">æºæ—¶åŒº</label>
                            <select id="sourceTimezone" class="form-control">
                                <optgroup label="ğŸŒ UTC">
                                    <option value="UTC">UTC (UTC+0)</option>
                                </optgroup>
                                
                                <!-- ç¾æ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ ç¾æ´²">
                                    <option value="America/New_York">çº½çº¦ (UTC-5/-4)</option>
                                    <option value="America/Chicago">èŠåŠ å“¥ (UTC-6/-5)</option>
                                    <option value="America/Denver">ä¸¹ä½› (UTC-7/-6)</option>
                                    <option value="America/Los_Angeles">æ´›æ‰çŸ¶ (UTC-8/-7)</option>
                                    <option value="America/Toronto">å¤šä¼¦å¤š (UTC-5/-4)</option>
                                    <option value="America/Vancouver">æ¸©å“¥å (UTC-8/-7)</option>
                                    <option value="America/Mexico_City">å¢¨è¥¿å“¥åŸ (UTC-6/-5)</option>
                                    <option value="America/Sao_Paulo">åœ£ä¿ç½— (UTC-3)</option>
                                    <option value="America/Argentina/Buenos_Aires">å¸ƒå®œè¯ºæ–¯è‰¾åˆ©æ–¯ (UTC-3)</option>
                                    <option value="America/Lima">åˆ©é©¬ (UTC-5)</option>
                                    <option value="America/Bogota">æ³¢å“¥å¤§ (UTC-5)</option>
                                    <option value="America/Caracas">åŠ æ‹‰åŠ æ–¯ (UTC-4)</option>
                                    <option value="America/Santiago">åœ£åœ°äºšå“¥ (UTC-3/-4)</option>
                                </optgroup>
                                
                                <!-- æ¬§æ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ æ¬§æ´²">
                                    <option value="Europe/London">ä¼¦æ•¦ (UTC+0/+1)</option>
                                    <option value="Europe/Paris">å·´é» (UTC+1/+2)</option>
                                    <option value="Europe/Berlin">æŸæ— (UTC+1/+2)</option>
                                    <option value="Europe/Rome">ç½—é©¬ (UTC+1/+2)</option>
                                    <option value="Europe/Madrid">é©¬å¾·é‡Œ (UTC+1/+2)</option>
                                    <option value="Europe/Amsterdam">é˜¿å§†æ–¯ç‰¹ä¸¹ (UTC+1/+2)</option>
                                    <option value="Europe/Zurich">è‹é»ä¸– (UTC+1/+2)</option>
                                    <option value="Europe/Vienna">ç»´ä¹Ÿçº³ (UTC+1/+2)</option>
                                    <option value="Europe/Stockholm">æ–¯å¾·å“¥å°”æ‘© (UTC+1/+2)</option>
                                    <option value="Europe/Oslo">å¥¥æ–¯é™† (UTC+1/+2)</option>
                                    <option value="Europe/Copenhagen">å“¥æœ¬å“ˆæ ¹ (UTC+1/+2)</option>
                                    <option value="Europe/Helsinki">èµ«å°”è¾›åŸº (UTC+2/+3)</option>
                                    <option value="Europe/Warsaw">åæ²™ (UTC+1/+2)</option>
                                    <option value="Europe/Prague">å¸ƒæ‹‰æ ¼ (UTC+1/+2)</option>
                                    <option value="Europe/Budapest">å¸ƒè¾¾ä½©æ–¯ (UTC+1/+2)</option>
                                    <option value="Europe/Athens">é›…å…¸ (UTC+2/+3)</option>
                                    <option value="Europe/Istanbul">ä¼Šæ–¯å¦å¸ƒå°” (UTC+3)</option>
                                    <option value="Europe/Moscow">è«æ–¯ç§‘ (UTC+3)</option>
                                    <option value="Europe/Kiev">åŸºè¾… (UTC+2/+3)</option>
                                </optgroup>
                                
                                <!-- äºšæ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ äºšæ´²">
                                    <option value="Asia/Dubai">è¿ªæ‹œ (UTC+4)</option>
                                    <option value="Asia/Tehran">å¾·é»‘å…° (UTC+3:30/+4:30)</option>
                                    <option value="Asia/Karachi">å¡æ‹‰å¥‡ (UTC+5)</option>
                                    <option value="Asia/Kolkata">æ–°å¾·é‡Œ (UTC+5:30)</option>
                                    <option value="Asia/Dhaka">è¾¾å¡ (UTC+6)</option>
                                    <option value="Asia/Bangkok">æ›¼è°· (UTC+7)</option>
                                    <option value="Asia/Jakarta">é›…åŠ è¾¾ (UTC+7)</option>
                                    <option value="Asia/Singapore">æ–°åŠ å¡ (UTC+8)</option>
                                    <option value="Asia/Kuala_Lumpur">å‰éš†å¡ (UTC+8)</option>
                                    <option value="Asia/Manila">é©¬å°¼æ‹‰ (UTC+8)</option>
                                    <option value="Asia/Shanghai">ä¸Šæµ· (UTC+8)</option>
                                    <option value="Asia/Hong_Kong">é¦™æ¸¯ (UTC+8)</option>
                                    <option value="Asia/Taipei">å°åŒ— (UTC+8)</option>
                                    <option value="Asia/Seoul">é¦–å°” (UTC+9)</option>
                                    <option value="Asia/Tokyo">ä¸œäº¬ (UTC+9)</option>
                                    <option value="Asia/Vladivostok">ç¬¦æ‹‰è¿ªæ²ƒæ–¯æ‰˜å…‹ (UTC+10)</option>
                                </optgroup>
                                
                                <!-- å¤§æ´‹æ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ å¤§æ´‹æ´²">
                                    <option value="Australia/Perth">ç€æ–¯ (UTC+8)</option>
                                    <option value="Australia/Adelaide">é˜¿å¾·è±å¾· (UTC+9:30/+10:30)</option>
                                    <option value="Australia/Darwin">è¾¾å°”æ–‡ (UTC+9:30)</option>
                                    <option value="Australia/Brisbane">å¸ƒé‡Œæ–¯ç­ (UTC+10)</option>
                                    <option value="Australia/Sydney">æ‚‰å°¼ (UTC+10/+11)</option>
                                    <option value="Australia/Melbourne">å¢¨å°”æœ¬ (UTC+10/+11)</option>
                                    <option value="Pacific/Auckland">å¥¥å…‹å…° (UTC+12/+13)</option>
                                    <option value="Pacific/Fiji">æ–æµ (UTC+12)</option>
                                    <option value="Pacific/Honolulu">ç«å¥´é²é² (UTC-10)</option>
                                </optgroup>
                                
                                <!-- éæ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ éæ´²">
                                    <option value="Africa/Cairo">å¼€ç½— (UTC+2)</option>
                                    <option value="Africa/Johannesburg">çº¦ç¿°å†…æ–¯å ¡ (UTC+2)</option>
                                    <option value="Africa/Lagos">æ‹‰å„æ–¯ (UTC+1)</option>
                                    <option value="Africa/Casablanca">å¡è¨å¸ƒå…°å¡ (UTC+0/+1)</option>
                                    <option value="Africa/Nairobi">å†…ç½—æ¯• (UTC+3)</option>
                                    <option value="Africa/Algiers">é˜¿å°”åŠå°” (UTC+1)</option>
                                    <option value="Africa/Tunis">çªå°¼æ–¯ (UTC+1)</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="targetTimezone">ç›®æ ‡æ—¶åŒº</label>
                            <select id="targetTimezone" class="form-control">
                                <optgroup label="ğŸŒ UTC">
                                    <option value="UTC">UTC (UTC+0)</option>
                                </optgroup>
                                
                                <!-- ç¾æ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ ç¾æ´²">
                                    <option value="America/New_York">çº½çº¦ (UTC-5/-4)</option>
                                    <option value="America/Chicago">èŠåŠ å“¥ (UTC-6/-5)</option>
                                    <option value="America/Denver">ä¸¹ä½› (UTC-7/-6)</option>
                                    <option value="America/Los_Angeles">æ´›æ‰çŸ¶ (UTC-8/-7)</option>
                                    <option value="America/Toronto">å¤šä¼¦å¤š (UTC-5/-4)</option>
                                    <option value="America/Vancouver">æ¸©å“¥å (UTC-8/-7)</option>
                                    <option value="America/Mexico_City">å¢¨è¥¿å“¥åŸ (UTC-6/-5)</option>
                                    <option value="America/Sao_Paulo">åœ£ä¿ç½— (UTC-3)</option>
                                    <option value="America/Argentina/Buenos_Aires">å¸ƒå®œè¯ºæ–¯è‰¾åˆ©æ–¯ (UTC-3)</option>
                                    <option value="America/Lima">åˆ©é©¬ (UTC-5)</option>
                                    <option value="America/Bogota">æ³¢å“¥å¤§ (UTC-5)</option>
                                    <option value="America/Caracas">åŠ æ‹‰åŠ æ–¯ (UTC-4)</option>
                                    <option value="America/Santiago">åœ£åœ°äºšå“¥ (UTC-3/-4)</option>
                                </optgroup>
                                
                                <!-- æ¬§æ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ æ¬§æ´²">
                                    <option value="Europe/London">ä¼¦æ•¦ (UTC+0/+1)</option>
                                    <option value="Europe/Paris">å·´é» (UTC+1/+2)</option>
                                    <option value="Europe/Berlin">æŸæ— (UTC+1/+2)</option>
                                    <option value="Europe/Rome">ç½—é©¬ (UTC+1/+2)</option>
                                    <option value="Europe/Madrid">é©¬å¾·é‡Œ (UTC+1/+2)</option>
                                    <option value="Europe/Amsterdam">é˜¿å§†æ–¯ç‰¹ä¸¹ (UTC+1/+2)</option>
                                    <option value="Europe/Zurich">è‹é»ä¸– (UTC+1/+2)</option>
                                    <option value="Europe/Vienna">ç»´ä¹Ÿçº³ (UTC+1/+2)</option>
                                    <option value="Europe/Stockholm">æ–¯å¾·å“¥å°”æ‘© (UTC+1/+2)</option>
                                    <option value="Europe/Oslo">å¥¥æ–¯é™† (UTC+1/+2)</option>
                                    <option value="Europe/Copenhagen">å“¥æœ¬å“ˆæ ¹ (UTC+1/+2)</option>
                                    <option value="Europe/Helsinki">èµ«å°”è¾›åŸº (UTC+2/+3)</option>
                                    <option value="Europe/Warsaw">åæ²™ (UTC+1/+2)</option>
                                    <option value="Europe/Prague">å¸ƒæ‹‰æ ¼ (UTC+1/+2)</option>
                                    <option value="Europe/Budapest">å¸ƒè¾¾ä½©æ–¯ (UTC+1/+2)</option>
                                    <option value="Europe/Athens">é›…å…¸ (UTC+2/+3)</option>
                                    <option value="Europe/Istanbul">ä¼Šæ–¯å¦å¸ƒå°” (UTC+3)</option>
                                    <option value="Europe/Moscow">è«æ–¯ç§‘ (UTC+3)</option>
                                    <option value="Europe/Kiev">åŸºè¾… (UTC+2/+3)</option>
                                </optgroup>
                                
                                <!-- äºšæ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ äºšæ´²">
                                    <option value="Asia/Dubai">è¿ªæ‹œ (UTC+4)</option>
                                    <option value="Asia/Tehran">å¾·é»‘å…° (UTC+3:30/+4:30)</option>
                                    <option value="Asia/Karachi">å¡æ‹‰å¥‡ (UTC+5)</option>
                                    <option value="Asia/Kolkata">æ–°å¾·é‡Œ (UTC+5:30)</option>
                                    <option value="Asia/Dhaka">è¾¾å¡ (UTC+6)</option>
                                    <option value="Asia/Bangkok">æ›¼è°· (UTC+7)</option>
                                    <option value="Asia/Jakarta">é›…åŠ è¾¾ (UTC+7)</option>
                                    <option value="Asia/Singapore">æ–°åŠ å¡ (UTC+8)</option>
                                    <option value="Asia/Kuala_Lumpur">å‰éš†å¡ (UTC+8)</option>
                                    <option value="Asia/Manila">é©¬å°¼æ‹‰ (UTC+8)</option>
                                    <option value="Asia/Shanghai">ä¸Šæµ· (UTC+8)</option>
                                    <option value="Asia/Hong_Kong">é¦™æ¸¯ (UTC+8)</option>
                                    <option value="Asia/Taipei">å°åŒ— (UTC+8)</option>
                                    <option value="Asia/Seoul">é¦–å°” (UTC+9)</option>
                                    <option value="Asia/Tokyo">ä¸œäº¬ (UTC+9)</option>
                                    <option value="Asia/Vladivostok">ç¬¦æ‹‰è¿ªæ²ƒæ–¯æ‰˜å…‹ (UTC+10)</option>
                                </optgroup>
                                
                                <!-- å¤§æ´‹æ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ å¤§æ´‹æ´²">
                                    <option value="Australia/Perth">ç€æ–¯ (UTC+8)</option>
                                    <option value="Australia/Adelaide">é˜¿å¾·è±å¾· (UTC+9:30/+10:30)</option>
                                    <option value="Australia/Darwin">è¾¾å°”æ–‡ (UTC+9:30)</option>
                                    <option value="Australia/Brisbane">å¸ƒé‡Œæ–¯ç­ (UTC+10)</option>
                                    <option value="Australia/Sydney">æ‚‰å°¼ (UTC+10/+11)</option>
                                    <option value="Australia/Melbourne">å¢¨å°”æœ¬ (UTC+10/+11)</option>
                                    <option value="Pacific/Auckland">å¥¥å…‹å…° (UTC+12/+13)</option>
                                    <option value="Pacific/Fiji">æ–æµ (UTC+12)</option>
                                    <option value="Pacific/Honolulu">ç«å¥´é²é² (UTC-10)</option>
                                </optgroup>
                                
                                <!-- éæ´²æ—¶åŒº -->
                                <optgroup label="ğŸŒ éæ´²">
                                    <option value="Africa/Cairo">å¼€ç½— (UTC+2)</option>
                                    <option value="Africa/Johannesburg">çº¦ç¿°å†…æ–¯å ¡ (UTC+2)</option>
                                    <option value="Africa/Lagos">æ‹‰å„æ–¯ (UTC+1)</option>
                                    <option value="Africa/Casablanca">å¡è¨å¸ƒå…°å¡ (UTC+0/+1)</option>
                                    <option value="Africa/Nairobi">å†…ç½—æ¯• (UTC+3)</option>
                                    <option value="Africa/Algiers">é˜¿å°”åŠå°” (UTC+1)</option>
                                    <option value="Africa/Tunis">çªå°¼æ–¯ (UTC+1)</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="sourceDateTime">æºæ—¶é—´</label>
                        <div class="datetime-input">
                            <input type="date" id="sourceDate" class="form-control" style="flex: 1;">
                            <input type="time" id="sourceTime" class="form-control" step="1" style="flex: 1;">
                            <input type="number" id="sourceMilliseconds" class="form-control" placeholder="000" min="0" max="999" style="width: 80px;">
                            <button type="button" id="useCurrentTime" class="btn">å½“å‰æ—¶é—´</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="sourceTimestamp">æˆ–è¾“å…¥æ—¶é—´æˆ³ (æ¯«ç§’)</label>
                        <div class="datetime-input">
                            <input type="number" id="sourceTimestamp" class="form-control" placeholder="1705312225123">
                            <button type="button" id="useCurrentTimestamp" class="btn">å½“å‰æ—¶é—´</button>
                        </div>
                    </div>

                    <div style="text-align: center;">
                        <button type="submit" class="btn" style="padding: 15px 40px; font-size: 18px;">
                            ğŸ”„ è½¬æ¢æ—¶é—´
                        </button>
                    </div>
                </form>

                <!-- è½¬æ¢ç»“æœ -->
                <div class="result" id="conversionResult">
                    <h3>ğŸ“Š è½¬æ¢ç»“æœ</h3>
                    <div class="result-grid">
                        <div class="result-item">
                            <h4>æºæ—¶åŒºæ—¶é—´</h4>
                            <div class="result-value" id="sourceTimeResult">--</div>
                            <div class="timezone-info">
                                <div class="timestamp">æ—¶é—´æˆ³: <span id="sourceTimestampResult">--</span></div>
                                <div class="dst-status" id="sourceDSTStatus">--</div>
                            </div>
                        </div>
                        <div class="result-item">
                            <h4>ç›®æ ‡æ—¶åŒºæ—¶é—´</h4>
                            <div class="result-value" id="targetTimeResult">--</div>
                            <div class="timezone-info">
                                <div class="timestamp">æ—¶é—´æˆ³: <span id="targetTimestampResult">--</span></div>
                                <div class="dst-status" id="targetDSTStatus">--</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- å†å²è®°å½•åŒºåŸŸ -->
                <div class="history-section">
                    <div class="history-header">
                        <h3>ğŸ“‹ è½¬æ¢å†å²è®°å½•</h3>
                        <div class="history-controls">
                            <button class="clear-history-btn" onclick="clearAllHistory()" title="æ¸…ç©ºæ‰€æœ‰è®°å½•">
                                ğŸ—‘ï¸ æ¸…ç©º
                            </button>
                            <button class="toggle-history-btn" onclick="toggleHistory()" title="æ˜¾ç¤º/éšè—å†å²è®°å½•">
                                ğŸ“– éšè—
                            </button>
                        </div>
                    </div>
                    <div class="history-list" id="historyList">
                        <div class="history-empty" id="historyEmpty">
                            <p>æš‚æ— è½¬æ¢è®°å½•</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ ¼å¼åŒ–æ—¶é—´å‡½æ•°
        function formatTime(date, timezone = null) {
            const options = {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            };

            if (timezone) {
                options.timeZone = timezone;
            }

            const formatted = date.toLocaleString('zh-CN', options);
            const milliseconds = date.getMilliseconds().toString().padStart(3, '0');
            
            return formatted.replace(/\//g, '-') + '.' + milliseconds;
        }

        // åˆ›å»ºæŒ‡å®šæ—¶åŒºçš„æ—¥æœŸå¯¹è±¡
        function createDateInTimezone(dateString, timezone) {
            if (timezone === 'UTC') {
                // å¯¹äºUTCï¼Œç›´æ¥è§£æ
                return new Date(dateString + 'Z');
            } else {
                // å¯¹äºå…¶ä»–æ—¶åŒºï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†
                // é¦–å…ˆåˆ›å»ºä¸€ä¸ªæœ¬åœ°æ—¥æœŸ
                const localDate = new Date(dateString);
                
                // è·å–è¯¥æ—¶åŒºç›¸å¯¹äºUTCçš„åç§»é‡
                const utcTime = localDate.getTime() + (localDate.getTimezoneOffset() * 60000);
                
                // åˆ›å»ºç›®æ ‡æ—¶åŒºçš„æ—¥æœŸ
                const targetDate = new Date(utcTime);
                return targetDate;
            }
        }

        // è·å–æ—¶é—´æˆ³
        function getTimestamp(date) {
            return date.getTime();
        }


        // è·å–æœ¬åœ°æ—¶åŒº
        function getLocalTimezone() {
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            return timezone;
        }

        // è·å–æœ¬åœ°æ—¶åŒºçš„UTCåç§»
        function getLocalTimezoneOffset() {
            const now = new Date();
            const offset = -now.getTimezoneOffset(); // è·å–åˆ†é’Ÿåç§»
            return offset;
        }

        // æ ¹æ®UTCåç§»æ‰¾åˆ°æœ€æ¥è¿‘çš„æ—¶åŒº
        function findClosestTimezone(offset) {
            const timezoneOffsets = {
                'UTC': 0,
                // ç¾æ´²æ—¶åŒº
                'America/New_York': -300, // UTC-5
                'America/Chicago': -360, // UTC-6
                'America/Denver': -420, // UTC-7
                'America/Los_Angeles': -480, // UTC-8
                'America/Toronto': -300, // UTC-5
                'America/Vancouver': -480, // UTC-8
                'America/Mexico_City': -360, // UTC-6
                'America/Sao_Paulo': -180, // UTC-3
                'America/Argentina/Buenos_Aires': -180, // UTC-3
                'America/Lima': -300, // UTC-5
                'America/Bogota': -300, // UTC-5
                'America/Caracas': -240, // UTC-4
                'America/Santiago': -180, // UTC-3
                // æ¬§æ´²æ—¶åŒº
                'Europe/London': 0, // UTC+0
                'Europe/Paris': 60, // UTC+1
                'Europe/Berlin': 60, // UTC+1
                'Europe/Rome': 60, // UTC+1
                'Europe/Madrid': 60, // UTC+1
                'Europe/Amsterdam': 60, // UTC+1
                'Europe/Zurich': 60, // UTC+1
                'Europe/Vienna': 60, // UTC+1
                'Europe/Stockholm': 60, // UTC+1
                'Europe/Oslo': 60, // UTC+1
                'Europe/Copenhagen': 60, // UTC+1
                'Europe/Helsinki': 120, // UTC+2
                'Europe/Warsaw': 60, // UTC+1
                'Europe/Prague': 60, // UTC+1
                'Europe/Budapest': 60, // UTC+1
                'Europe/Athens': 120, // UTC+2
                'Europe/Istanbul': 180, // UTC+3
                'Europe/Moscow': 180, // UTC+3
                'Europe/Kiev': 120, // UTC+2
                // äºšæ´²æ—¶åŒº
                'Asia/Dubai': 240, // UTC+4
                'Asia/Tehran': 210, // UTC+3:30
                'Asia/Karachi': 300, // UTC+5
                'Asia/Kolkata': 330, // UTC+5:30
                'Asia/Dhaka': 360, // UTC+6
                'Asia/Bangkok': 420, // UTC+7
                'Asia/Jakarta': 420, // UTC+7
                'Asia/Singapore': 480, // UTC+8
                'Asia/Kuala_Lumpur': 480, // UTC+8
                'Asia/Manila': 480, // UTC+8
                'Asia/Shanghai': 480, // UTC+8
                'Asia/Hong_Kong': 480, // UTC+8
                'Asia/Taipei': 480, // UTC+8
                'Asia/Seoul': 540, // UTC+9
                'Asia/Tokyo': 540, // UTC+9
                'Asia/Vladivostok': 600, // UTC+10
                // å¤§æ´‹æ´²æ—¶åŒº
                'Australia/Perth': 480, // UTC+8
                'Australia/Adelaide': 570, // UTC+9:30
                'Australia/Darwin': 570, // UTC+9:30
                'Australia/Brisbane': 600, // UTC+10
                'Australia/Sydney': 600, // UTC+10
                'Australia/Melbourne': 600, // UTC+10
                'Pacific/Auckland': 720, // UTC+12
                'Pacific/Fiji': 720, // UTC+12
                'Pacific/Honolulu': -600, // UTC-10
                // éæ´²æ—¶åŒº
                'Africa/Cairo': 120, // UTC+2
                'Africa/Johannesburg': 120, // UTC+2
                'Africa/Lagos': 60, // UTC+1
                'Africa/Casablanca': 0, // UTC+0
                'Africa/Nairobi': 180, // UTC+3
                'Africa/Algiers': 60, // UTC+1
                'Africa/Tunis': 60 // UTC+1
            };

            let closest = 'UTC';
            let minDiff = Math.abs(offset);

            for (const [timezone, timezoneOffset] of Object.entries(timezoneOffsets)) {
                const diff = Math.abs(offset - timezoneOffset);
                if (diff < minDiff) {
                    minDiff = diff;
                    closest = timezone;
                }
            }

            return closest;
        }

        // æ›´æ–°å½“å‰æ—¶é—´æ˜¾ç¤º
        function updateCurrentTime() {
            const now = new Date();
            const nowTimestamp = now.getTime();
            
            // æ ¼å¼åŒ–æœ¬åœ°æ—¶é—´
            const localTimeStr = formatTime(now);
            document.getElementById('localTime').textContent = localTimeStr;
            document.getElementById('localTimestamp').textContent = `æ—¶é—´æˆ³: ${nowTimestamp}`;
            
            // æ ¼å¼åŒ–UTCæ—¶é—´
            const utcTimeStr = formatTime(now, 'UTC');
            document.getElementById('utcTime').textContent = utcTimeStr;
            document.getElementById('utcTimestamp').textContent = `æ—¶é—´æˆ³: ${nowTimestamp}`;
        }

        // åˆå§‹åŒ–é¡µé¢
        function init() {
            // æ›´æ–°å½“å‰æ—¶é—´æ˜¾ç¤º
            updateCurrentTime();
            
            // æ¯ç§’æ›´æ–°ä¸€æ¬¡å½“å‰æ—¶é—´
            setInterval(updateCurrentTime, 1000);
            
            // è‡ªåŠ¨è®¾ç½®æºæ—¶åŒºä¸ºæœ¬åœ°æ—¶åŒº
            const localTimezone = getLocalTimezone();
            const localOffset = getLocalTimezoneOffset();
            const sourceSelect = document.getElementById('sourceTimezone');
            
            // é¦–å…ˆå°è¯•ç²¾ç¡®åŒ¹é…
            let found = false;
            for (let option of sourceSelect.options) {
                if (option.value === localTimezone) {
                    option.selected = true;
                    found = true;
                    break;
                }
            }

            // å¦‚æœæ²¡æœ‰ç²¾ç¡®åŒ¹é…ï¼Œä½¿ç”¨æœ€æ¥è¿‘çš„æ—¶åŒº
            if (!found) {
                const closestTimezone = findClosestTimezone(localOffset);
                for (let option of sourceSelect.options) {
                    if (option.value === closestTimezone) {
                        option.selected = true;
                        break;
                    }
                }
            }

            // è®¾ç½®å½“å‰æ—¶é—´æŒ‰é’®
            document.getElementById('useCurrentTime').addEventListener('click', function() {
                setCurrentTime();
            });

            // è®¾ç½®å½“å‰æ—¶é—´çš„å‡½æ•°
            function setCurrentTime() {
                const sourceTimezone = document.getElementById('sourceTimezone').value;
                const now = new Date();
                const nowTimestamp = now.getTime();
                
                // è·å–æºæ—¶åŒºç›¸å¯¹äºUTCçš„åç§»é‡ï¼ˆè€ƒè™‘å¤ä»¤æ—¶ï¼‰
                const sourceOffset = getTimezoneOffset(sourceTimezone, nowTimestamp);
                
                // è®¡ç®—æºæ—¶åŒºçš„å½“å‰æ—¶é—´æˆ³
                const sourceTimestamp = nowTimestamp + (sourceOffset * 60000);
                
                // è½¬æ¢ä¸ºæ—¥æœŸå’Œæ—¶é—´æ ¼å¼
                const dateTimeInfo = timestampToDateTimeComponents(sourceTimestamp);
                
                document.getElementById('sourceDate').value = dateTimeInfo.date;
                document.getElementById('sourceTime').value = dateTimeInfo.time;
                document.getElementById('sourceMilliseconds').value = dateTimeInfo.milliseconds;
                
                // åŒæ­¥åˆ°æ—¶é—´æˆ³è¾“å…¥æ¡†
                document.getElementById('sourceTimestamp').value = sourceTimestamp;
            }

            // åˆå§‹åŒ–æ—¶è‡ªåŠ¨è®¾ç½®å½“å‰æ—¶é—´
            setCurrentTime();

            // è®¾ç½®å½“å‰æ—¶é—´æˆ³æŒ‰é’®
            document.getElementById('useCurrentTimestamp').addEventListener('click', function() {
                const now = new Date();
                const nowTimestamp = now.getTime();
                document.getElementById('sourceTimestamp').value = nowTimestamp;
            });

            // æ—¶é—´æˆ³è¾“å…¥æ¡†å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢ä¸ºæ—¶é—´é€‰æ‹©å™¨
            document.getElementById('sourceTimestamp').addEventListener('input', function(e) {
                const timestamp = parseInt(e.target.value);
                if (!isNaN(timestamp) && timestamp > 0) {
                    const dateTimeInfo = timestampToDateTimeComponents(timestamp);
                    document.getElementById('sourceDate').value = dateTimeInfo.date;
                    document.getElementById('sourceTime').value = dateTimeInfo.time;
                    document.getElementById('sourceMilliseconds').value = dateTimeInfo.milliseconds;
                }
            });

            // æ—¶é—´é€‰æ‹©å™¨å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢ä¸ºæ—¶é—´æˆ³
            function updateTimestampFromComponents() {
                const date = document.getElementById('sourceDate').value;
                const time = document.getElementById('sourceTime').value;
                const milliseconds = document.getElementById('sourceMilliseconds').value;
                
                if (date && time) {
                    try {
                        const timestamp = dateTimeComponentsToTimestamp(date, time, milliseconds);
                        if (timestamp !== null) {
                            document.getElementById('sourceTimestamp').value = timestamp;
                        }
                    } catch (error) {
                        // å¿½ç•¥è½¬æ¢é”™è¯¯
                    }
                }
            }

            // ä¸ºæ‰€æœ‰æ—¶é—´é€‰æ‹©å™¨æ·»åŠ äº‹ä»¶ç›‘å¬
            document.getElementById('sourceDate').addEventListener('input', updateTimestampFromComponents);
            document.getElementById('sourceTime').addEventListener('input', updateTimestampFromComponents);
            document.getElementById('sourceMilliseconds').addEventListener('input', updateTimestampFromComponents);

            // æ—¶åŒºé€‰æ‹©å™¨å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°å½“å‰æ—¶é—´
            document.getElementById('sourceTimezone').addEventListener('change', function() {
                // å¦‚æœå½“å‰æ²¡æœ‰æ‰‹åŠ¨è¾“å…¥æ—¶é—´ï¼Œåˆ™è‡ªåŠ¨æ›´æ–°ä¸ºå½“å‰æ—¶é—´
                const sourceDate = document.getElementById('sourceDate').value;
                const sourceTime = document.getElementById('sourceTime').value;
                const sourceTimestamp = document.getElementById('sourceTimestamp').value;
                
                // å¦‚æœæ‰€æœ‰æ—¶é—´è¾“å…¥æ¡†éƒ½ä¸ºç©ºï¼Œåˆ™è‡ªåŠ¨è®¾ç½®å½“å‰æ—¶é—´
                if (!sourceDate && !sourceTime && !sourceTimestamp) {
                    setCurrentTime();
                }
            });

            // è¡¨å•æäº¤å¤„ç†
            document.getElementById('timeConverterForm').addEventListener('submit', function(e) {
                e.preventDefault();
                convertTime();
            });

        }


        // è·å–æ—¶åŒºåç§»é‡ï¼ˆåˆ†é’Ÿï¼‰- è€ƒè™‘å¤ä»¤æ—¶
        function getTimezoneOffset(timezone, timestamp) {
            if (timezone === 'UTC') return 0;
            
            // ä»æ—¶é—´æˆ³è®¡ç®—å¹´ä»½ã€æœˆä»½ã€æ—¥æœŸ
            const dateInfo = getDateFromTimestamp(timestamp);
            const year = dateInfo.year;
            const month = dateInfo.month;
            const day = dateInfo.day;
            
            // è·å–å¤ä»¤æ—¶è§„åˆ™
            const dstRules = getDSTRules(timezone, year);
            
            // æ£€æŸ¥æ˜¯å¦åœ¨å¤ä»¤æ—¶æœŸé—´
            const isDST = isInDSTPeriod(year, month, day, dstRules);
            
            // åŸºç¡€åç§»é‡ï¼ˆå†¬ä»¤æ—¶ï¼‰
            const baseOffsets = {
                // ç¾æ´²æ—¶åŒº
                'America/New_York': -300, // UTC-5 (EST)
                'America/Chicago': -360, // UTC-6 (CST)
                'America/Denver': -420, // UTC-7 (MST)
                'America/Los_Angeles': -480, // UTC-8 (PST)
                'America/Toronto': -300, // UTC-5 (EST)
                'America/Vancouver': -480, // UTC-8 (PST)
                'America/Mexico_City': -360, // UTC-6 (CST)
                'America/Sao_Paulo': -180, // UTC-3 (BRT)
                'America/Argentina/Buenos_Aires': -180, // UTC-3 (ART)
                'America/Lima': -300, // UTC-5 (PET)
                'America/Bogota': -300, // UTC-5 (COT)
                'America/Caracas': -240, // UTC-4 (VET)
                'America/Santiago': -180, // UTC-3 (CLT)
                // æ¬§æ´²æ—¶åŒº
                'Europe/London': 0, // UTC+0 (GMT)
                'Europe/Paris': 60, // UTC+1 (CET)
                'Europe/Berlin': 60, // UTC+1 (CET)
                'Europe/Rome': 60, // UTC+1 (CET)
                'Europe/Madrid': 60, // UTC+1 (CET)
                'Europe/Amsterdam': 60, // UTC+1 (CET)
                'Europe/Zurich': 60, // UTC+1 (CET)
                'Europe/Vienna': 60, // UTC+1 (CET)
                'Europe/Stockholm': 60, // UTC+1 (CET)
                'Europe/Oslo': 60, // UTC+1 (CET)
                'Europe/Copenhagen': 60, // UTC+1 (CET)
                'Europe/Helsinki': 120, // UTC+2 (EET)
                'Europe/Warsaw': 60, // UTC+1 (CET)
                'Europe/Prague': 60, // UTC+1 (CET)
                'Europe/Budapest': 60, // UTC+1 (CET)
                'Europe/Athens': 120, // UTC+2 (EET)
                'Europe/Istanbul': 180, // UTC+3 (TRT)
                'Europe/Moscow': 180, // UTC+3 (MSK)
                'Europe/Kiev': 120, // UTC+2 (EET)
                // äºšæ´²æ—¶åŒº
                'Asia/Dubai': 240, // UTC+4 (GST)
                'Asia/Tehran': 210, // UTC+3:30 (IRST)
                'Asia/Karachi': 300, // UTC+5 (PKT)
                'Asia/Kolkata': 330, // UTC+5:30 (IST)
                'Asia/Dhaka': 360, // UTC+6 (BST)
                'Asia/Bangkok': 420, // UTC+7 (ICT)
                'Asia/Jakarta': 420, // UTC+7 (WIB)
                'Asia/Singapore': 480, // UTC+8 (SGT)
                'Asia/Kuala_Lumpur': 480, // UTC+8 (MYT)
                'Asia/Manila': 480, // UTC+8 (PHT)
                'Asia/Shanghai': 480, // UTC+8 (CST)
                'Asia/Hong_Kong': 480, // UTC+8 (HKT)
                'Asia/Taipei': 480, // UTC+8 (CST)
                'Asia/Seoul': 540, // UTC+9 (KST)
                'Asia/Tokyo': 540, // UTC+9 (JST)
                'Asia/Vladivostok': 600, // UTC+10 (VLAT)
                // å¤§æ´‹æ´²æ—¶åŒº
                'Australia/Perth': 480, // UTC+8 (AWST)
                'Australia/Adelaide': 570, // UTC+9:30 (ACST)
                'Australia/Darwin': 570, // UTC+9:30 (ACST)
                'Australia/Brisbane': 600, // UTC+10 (AEST)
                'Australia/Sydney': 600, // UTC+10 (AEST)
                'Australia/Melbourne': 600, // UTC+10 (AEST)
                'Pacific/Auckland': 720, // UTC+12 (NZST)
                'Pacific/Fiji': 720, // UTC+12 (FJT)
                'Pacific/Honolulu': -600, // UTC-10 (HST)
                // éæ´²æ—¶åŒº
                'Africa/Cairo': 120, // UTC+2 (EET)
                'Africa/Johannesburg': 120, // UTC+2 (SAST)
                'Africa/Lagos': 60, // UTC+1 (WAT)
                'Africa/Casablanca': 0, // UTC+0 (WET)
                'Africa/Nairobi': 180, // UTC+3 (EAT)
                'Africa/Algiers': 60, // UTC+1 (CET)
                'Africa/Tunis': 60 // UTC+1 (CET)
            };
            
            const baseOffset = baseOffsets[timezone] || 0;
            
            // å¦‚æœåœ¨å¤ä»¤æ—¶æœŸé—´ï¼Œå¢åŠ 1å°æ—¶ï¼ˆ60åˆ†é’Ÿï¼‰
            if (isDST) {
                return baseOffset + 60;
            }
            
            return baseOffset;
        }
        
        // ä»æ—¶é—´æˆ³è·å–æ—¥æœŸä¿¡æ¯
        function getDateFromTimestamp(timestamp) {
            let remaining = timestamp;
            
            // è®¡ç®—å¹´ä»½
            let year = 1970;
            while (remaining >= (isLeapYear(year) ? 366 : 365) * 24 * 60 * 60 * 1000) {
                remaining -= (isLeapYear(year) ? 366 : 365) * 24 * 60 * 60 * 1000;
                year++;
            }
            
            // è®¡ç®—æœˆä»½
            let month = 1;
            while (remaining >= getDaysInMonth(year, month) * 24 * 60 * 60 * 1000) {
                remaining -= getDaysInMonth(year, month) * 24 * 60 * 60 * 1000;
                month++;
            }
            
            // è®¡ç®—å¤©æ•°
            const day = Math.floor(remaining / (24 * 60 * 60 * 1000)) + 1;
            
            return { year, month, day };
        }
        
        // è·å–å¤ä»¤æ—¶è§„åˆ™
        function getDSTRules(timezone, year) {
            const rules = {
                // ç¾æ´²æ—¶åŒºï¼ˆç¾å›½/åŠ æ‹¿å¤§å¤ä»¤æ—¶ï¼‰
                'America/New_York': {
                    start: { month: 3, day: getSecondSunday(year, 3) }, // 3æœˆç¬¬äºŒä¸ªå‘¨æ—¥
                    end: { month: 11, day: getFirstSunday(year, 11) }    // 11æœˆç¬¬ä¸€ä¸ªå‘¨æ—¥
                },
                'America/Chicago': {
                    start: { month: 3, day: getSecondSunday(year, 3) },
                    end: { month: 11, day: getFirstSunday(year, 11) }
                },
                'America/Denver': {
                    start: { month: 3, day: getSecondSunday(year, 3) },
                    end: { month: 11, day: getFirstSunday(year, 11) }
                },
                'America/Los_Angeles': {
                    start: { month: 3, day: getSecondSunday(year, 3) },
                    end: { month: 11, day: getFirstSunday(year, 11) }
                },
                'America/Toronto': {
                    start: { month: 3, day: getSecondSunday(year, 3) },
                    end: { month: 11, day: getFirstSunday(year, 11) }
                },
                'America/Vancouver': {
                    start: { month: 3, day: getSecondSunday(year, 3) },
                    end: { month: 11, day: getFirstSunday(year, 11) }
                },
                'America/Mexico_City': {
                    start: { month: 4, day: getFirstSunday(year, 4) }, // 4æœˆç¬¬ä¸€ä¸ªå‘¨æ—¥
                    end: { month: 10, day: getLastSunday(year, 10) }    // 10æœˆæœ€åä¸€ä¸ªå‘¨æ—¥
                },
                'America/Santiago': {
                    start: { month: 9, day: getFirstSunday(year, 9) }, // 9æœˆç¬¬ä¸€ä¸ªå‘¨æ—¥
                    end: { month: 4, day: getFirstSunday(year + 1, 4) }  // æ¬¡å¹´4æœˆç¬¬ä¸€ä¸ªå‘¨æ—¥
                },
                // æ¬§æ´²æ—¶åŒºï¼ˆæ¬§ç›Ÿå¤ä»¤æ—¶ï¼‰
                'Europe/London': {
                    start: { month: 3, day: getLastSunday(year, 3) }, // 3æœˆæœ€åä¸€ä¸ªå‘¨æ—¥
                    end: { month: 10, day: getLastSunday(year, 10) } // 10æœˆæœ€åä¸€ä¸ªå‘¨æ—¥
                },
                'Europe/Paris': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Berlin': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Rome': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Madrid': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Amsterdam': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Zurich': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Vienna': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Stockholm': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Oslo': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Copenhagen': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Helsinki': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Warsaw': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Prague': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Budapest': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Athens': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                'Europe/Kiev': {
                    start: { month: 3, day: getLastSunday(year, 3) },
                    end: { month: 10, day: getLastSunday(year, 10) }
                },
                // å¤§æ´‹æ´²æ—¶åŒº
                'Australia/Sydney': {
                    start: { month: 10, day: getFirstSunday(year, 10) }, // 10æœˆç¬¬ä¸€ä¸ªå‘¨æ—¥
                    end: { month: 4, day: getFirstSunday(year + 1, 4) }   // æ¬¡å¹´4æœˆç¬¬ä¸€ä¸ªå‘¨æ—¥
                },
                'Australia/Melbourne': {
                    start: { month: 10, day: getFirstSunday(year, 10) },
                    end: { month: 4, day: getFirstSunday(year + 1, 4) }
                },
                'Australia/Adelaide': {
                    start: { month: 10, day: getFirstSunday(year, 10) },
                    end: { month: 4, day: getFirstSunday(year + 1, 4) }
                },
                'Pacific/Auckland': {
                    start: { month: 9, day: getLastSunday(year, 9) }, // 9æœˆæœ€åä¸€ä¸ªå‘¨æ—¥
                    end: { month: 4, day: getFirstSunday(year + 1, 4) } // æ¬¡å¹´4æœˆç¬¬ä¸€ä¸ªå‘¨æ—¥
                }
            };
            
            return rules[timezone] || null;
        }
        
        // è·å–æŸæœˆçš„ç¬¬äºŒä¸ªå‘¨æ—¥
        function getSecondSunday(year, month) {
            const firstDay = new Date(year, month - 1, 1).getDay();
            const firstSunday = firstDay === 0 ? 1 : 8 - firstDay;
            return firstSunday + 7;
        }
        
        // è·å–æŸæœˆçš„ç¬¬ä¸€ä¸ªå‘¨æ—¥
        function getFirstSunday(year, month) {
            const firstDay = new Date(year, month - 1, 1).getDay();
            return firstDay === 0 ? 1 : 8 - firstDay;
        }
        
        // è·å–æŸæœˆçš„æœ€åä¸€ä¸ªå‘¨æ—¥
        function getLastSunday(year, month) {
            const lastDay = new Date(year, month, 0).getDate();
            const lastDayOfWeek = new Date(year, month - 1, lastDay).getDay();
            return lastDay - lastDayOfWeek;
        }
        
        // æ£€æŸ¥æ˜¯å¦åœ¨å¤ä»¤æ—¶æœŸé—´
        function isInDSTPeriod(year, month, day, dstRules) {
            if (!dstRules) return false;
            
            const currentDate = year * 10000 + month * 100 + day;
            const startDate = year * 10000 + dstRules.start.month * 100 + dstRules.start.day;
            const endDate = year * 10000 + dstRules.end.month * 100 + dstRules.end.day;
            
            // å¤„ç†è·¨å¹´çš„æƒ…å†µï¼ˆå¦‚æ¾³å¤§åˆ©äºšï¼‰
            if (dstRules.start.month > dstRules.end.month) {
                return currentDate >= startDate || currentDate <= endDate;
            } else {
                return currentDate >= startDate && currentDate <= endDate;
            }
        }

        // è·å–æ—¶åŒºçš„å¤ä»¤æ—¶çŠ¶æ€ä¿¡æ¯
        function getDSTStatus(timezone, timestamp) {
            if (timezone === 'UTC') {
                return { isDST: false, status: 'UTC (æ— å¤ä»¤æ—¶)', className: 'dst-inactive' };
            }

            const dateInfo = getDateFromTimestamp(timestamp);
            const dstRules = getDSTRules(timezone, dateInfo.year);
            const isDST = isInDSTPeriod(dateInfo.year, dateInfo.month, dateInfo.day, dstRules);
            
            const timezoneNames = {
            };

            const cityName = timezoneNames[timezone] || timezone;
            
            if (dstRules) {
                if (isDST) {
                    return { 
                        isDST: true, 
                        status: `${cityName} (å¤ä»¤æ—¶)`, 
                        className: 'dst-active' 
                    };
                } else {
                    return { 
                        isDST: false, 
                        status: `${cityName} (å†¬ä»¤æ—¶)`, 
                        className: 'dst-inactive' 
                    };
                }
            } else {
                return { 
                    isDST: false, 
                    status: `${cityName} (æ— å¤ä»¤æ—¶)`, 
                    className: 'dst-inactive' 
                };
            }
        }

        // å°†æ—¶é—´å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰- çº¯æ•°å­¦è®¡ç®—
        function dateTimeToTimestamp(dateTimeStr) {
            const regex = /^(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2}):(\d{2})\.(\d{3})$/;
            const match = dateTimeStr.match(regex);
            
            if (!match) {
                throw new Error('æ—¶é—´æ ¼å¼ä¸æ­£ç¡®');
            }
            
            const [, year, month, day, hour, minute, second, millisecond] = match;
            
            // è®¡ç®—ä»1970å¹´1æœˆ1æ—¥00:00:00.000 UTCåˆ°æŒ‡å®šæ—¶é—´çš„æ¯«ç§’æ•°
            // ä½¿ç”¨çº¯æ•°å­¦è®¡ç®—ï¼Œä¸ä¾èµ–Dateå¯¹è±¡
            const y = parseInt(year);
            const m = parseInt(month);
            const d = parseInt(day);
            const h = parseInt(hour);
            const min = parseInt(minute);
            const s = parseInt(second);
            const ms = parseInt(millisecond);
            
            // è®¡ç®—å¹´ä»½çš„å¤©æ•°
            let days = 0;
            for (let i = 1970; i < y; i++) {
                if (isLeapYear(i)) {
                    days += 366;
                } else {
                    days += 365;
                }
            }
            
            // è®¡ç®—å½“å¹´çš„å¤©æ•°
            for (let i = 1; i < m; i++) {
                days += getDaysInMonth(y, i);
            }
            
            days += d - 1;
            
            // è®¡ç®—æ€»æ¯«ç§’æ•°
            const totalMs = (days * 24 * 60 * 60 * 1000) + 
                           (h * 60 * 60 * 1000) + 
                           (min * 60 * 1000) + 
                           (s * 1000) + 
                           ms;
            
            return totalMs;
        }

        // åˆ¤æ–­æ˜¯å¦ä¸ºé—°å¹´
        function isLeapYear(year) {
            return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
        }

        // è·å–æŸæœˆçš„å¤©æ•°
        function getDaysInMonth(year, month) {
            const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            if (month === 2 && isLeapYear(year)) {
                return 29;
            }
            return daysInMonth[month - 1];
        }

        // å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´å­—ç¬¦ä¸² - çº¯æ•°å­¦è®¡ç®—
        function timestampToDateTime(timestamp) {
            let remaining = timestamp;
            
            // è®¡ç®—å¹´ä»½
            let year = 1970;
            while (remaining >= (isLeapYear(year) ? 366 : 365) * 24 * 60 * 60 * 1000) {
                remaining -= (isLeapYear(year) ? 366 : 365) * 24 * 60 * 60 * 1000;
                year++;
            }
            
            // è®¡ç®—æœˆä»½
            let month = 1;
            while (remaining >= getDaysInMonth(year, month) * 24 * 60 * 60 * 1000) {
                remaining -= getDaysInMonth(year, month) * 24 * 60 * 60 * 1000;
                month++;
            }
            
            // è®¡ç®—å¤©æ•°
            const day = Math.floor(remaining / (24 * 60 * 60 * 1000)) + 1;
            remaining %= 24 * 60 * 60 * 1000;
            
            // è®¡ç®—å°æ—¶
            const hour = Math.floor(remaining / (60 * 60 * 1000));
            remaining %= 60 * 60 * 1000;
            
            // è®¡ç®—åˆ†é’Ÿ
            const minute = Math.floor(remaining / (60 * 1000));
            remaining %= 60 * 1000;
            
            // è®¡ç®—ç§’
            const second = Math.floor(remaining / 1000);
            remaining %= 1000;
            
            // æ¯«ç§’
            const millisecond = remaining;
            
            return `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')} ${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}:${second.toString().padStart(2, '0')}.${millisecond.toString().padStart(3, '0')}`;
        }

        // å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¥æœŸæ—¶é—´ç»„ä»¶
        function timestampToDateTimeComponents(timestamp) {
            let remaining = timestamp;
            
            // è®¡ç®—å¹´ä»½
            let year = 1970;
            while (remaining >= (isLeapYear(year) ? 366 : 365) * 24 * 60 * 60 * 1000) {
                remaining -= (isLeapYear(year) ? 366 : 365) * 24 * 60 * 60 * 1000;
                year++;
            }
            
            // è®¡ç®—æœˆä»½
            let month = 1;
            while (remaining >= getDaysInMonth(year, month) * 24 * 60 * 60 * 1000) {
                remaining -= getDaysInMonth(year, month) * 24 * 60 * 60 * 1000;
                month++;
            }
            
            // è®¡ç®—å¤©æ•°
            const day = Math.floor(remaining / (24 * 60 * 60 * 1000)) + 1;
            remaining %= 24 * 60 * 60 * 1000;
            
            // è®¡ç®—å°æ—¶
            const hour = Math.floor(remaining / (60 * 60 * 1000));
            remaining %= 60 * 60 * 1000;
            
            // è®¡ç®—åˆ†é’Ÿ
            const minute = Math.floor(remaining / (60 * 1000));
            remaining %= 60 * 1000;
            
            // è®¡ç®—ç§’
            const second = Math.floor(remaining / 1000);
            remaining %= 1000;
            
            // æ¯«ç§’
            const millisecond = remaining;
            
            return {
                date: `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`,
                time: `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}:${second.toString().padStart(2, '0')}`,
                milliseconds: millisecond
            };
        }

        // å°†æ—¥æœŸæ—¶é—´ç»„ä»¶è½¬æ¢ä¸ºæ—¶é—´æˆ³
        function dateTimeComponentsToTimestamp(date, time, milliseconds) {
            if (!date || !time) return null;
            
            // è§£ææ—¥æœŸ
            const dateParts = date.split('-');
            const year = parseInt(dateParts[0]);
            const month = parseInt(dateParts[1]);
            const day = parseInt(dateParts[2]);
            
            // è§£ææ—¶é—´
            const timeParts = time.split(':');
            const hour = parseInt(timeParts[0]);
            const minute = parseInt(timeParts[1]);
            const second = parseInt(timeParts[2]) || 0;
            
            // è§£ææ¯«ç§’
            const ms = parseInt(milliseconds) || 0;
            
            // è®¡ç®—ä»1970å¹´1æœˆ1æ—¥00:00:00.000 UTCåˆ°æŒ‡å®šæ—¶é—´çš„æ¯«ç§’æ•°
            let days = 0;
            for (let i = 1970; i < year; i++) {
                if (isLeapYear(i)) {
                    days += 366;
                } else {
                    days += 365;
                }
            }
            
            // è®¡ç®—å½“å¹´çš„å¤©æ•°
            for (let i = 1; i < month; i++) {
                days += getDaysInMonth(year, i);
            }
            
            days += day - 1;
            
            // è®¡ç®—æ€»æ¯«ç§’æ•°
            const totalMs = (days * 24 * 60 * 60 * 1000) + 
                           (hour * 60 * 60 * 1000) + 
                           (minute * 60 * 1000) + 
                           (second * 1000) + 
                           ms;
            
            return totalMs;
        }

        // å°†datetime-localæ ¼å¼è½¬æ¢ä¸ºæ—¶é—´æˆ³
        function dateTimeLocalToTimestamp(dateTimeLocalStr) {
            if (!dateTimeLocalStr) return null;
            
            // æ ¼å¼: YYYY-MM-DDTHH:mm
            const regex = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})$/;
            const match = dateTimeLocalStr.match(regex);
            
            if (!match) {
                throw new Error('æ—¶é—´æ ¼å¼ä¸æ­£ç¡®');
            }
            
            const [, year, month, day, hour, minute] = match;
            
            // è®¡ç®—ä»1970å¹´1æœˆ1æ—¥00:00:00.000 UTCåˆ°æŒ‡å®šæ—¶é—´çš„æ¯«ç§’æ•°
            const y = parseInt(year);
            const m = parseInt(month);
            const d = parseInt(day);
            const h = parseInt(hour);
            const min = parseInt(minute);
            
            // è®¡ç®—å¹´ä»½çš„å¤©æ•°
            let days = 0;
            for (let i = 1970; i < y; i++) {
                if (isLeapYear(i)) {
                    days += 366;
                } else {
                    days += 365;
                }
            }
            
            // è®¡ç®—å½“å¹´çš„å¤©æ•°
            for (let i = 1; i < m; i++) {
                days += getDaysInMonth(y, i);
            }
            
            days += d - 1;
            
            // è®¡ç®—æ€»æ¯«ç§’æ•°
            const totalMs = (days * 24 * 60 * 60 * 1000) + 
                           (h * 60 * 60 * 1000) + 
                           (min * 60 * 1000);
            
            return totalMs;
        }

        // æ—¶é—´è½¬æ¢å‡½æ•°
        function convertTime() {
            const sourceTimezone = document.getElementById('sourceTimezone').value;
            const targetTimezone = document.getElementById('targetTimezone').value;
            const sourceDate = document.getElementById('sourceDate').value;
            const sourceTime = document.getElementById('sourceTime').value;
            const sourceMilliseconds = document.getElementById('sourceMilliseconds').value;
            const sourceTimestampInput = document.getElementById('sourceTimestamp').value;

            if (!sourceDate && !sourceTime && !sourceTimestampInput) {
                alert('è¯·é€‰æ‹©æ—¶é—´æˆ–è¾“å…¥æ—¶é—´æˆ³ï¼');
                return;
            }

            try {
                let sourceTimestamp;
                let sourceTimeFormatted;

                // ä¼˜å…ˆä½¿ç”¨æ—¶é—´æˆ³è¾“å…¥
                if (sourceTimestampInput) {
                    sourceTimestamp = parseInt(sourceTimestampInput);
                    if (isNaN(sourceTimestamp) || sourceTimestamp <= 0) {
                        throw new Error('æ— æ•ˆçš„æ—¶é—´æˆ³');
                    }
                    sourceTimeFormatted = timestampToDateTime(sourceTimestamp);
                } else if (sourceDate && sourceTime) {
                    // ä½¿ç”¨æ—¶é—´é€‰æ‹©å™¨è¾“å…¥
                    sourceTimestamp = dateTimeComponentsToTimestamp(sourceDate, sourceTime, sourceMilliseconds);
                    if (!sourceTimestamp) {
                        throw new Error('æ— æ•ˆçš„æ—¶é—´é€‰æ‹©');
                    }
                    sourceTimeFormatted = timestampToDateTime(sourceTimestamp);
                } else {
                    throw new Error('è¯·é€‰æ‹©æ—¶é—´æˆ–è¾“å…¥æ—¶é—´æˆ³');
                }

                // å°†æºæ—¶åŒºæ—¶é—´è½¬æ¢ä¸ºUTCæ—¶é—´æˆ³
                let utcTimestamp;
                if (sourceTimezone === 'UTC') {
                    utcTimestamp = sourceTimestamp;
                } else {
                    // è·å–æºæ—¶åŒºç›¸å¯¹äºUTCçš„åç§»é‡ï¼ˆè€ƒè™‘å¤ä»¤æ—¶ï¼‰
                    const sourceOffset = getTimezoneOffset(sourceTimezone, sourceTimestamp);
                    
                    // å°†æºæ—¶åŒºæ—¶é—´è½¬æ¢ä¸ºUTCæ—¶é—´æˆ³
                    utcTimestamp = sourceTimestamp - (sourceOffset * 60000);
                }

                // ä»UTCæ—¶é—´æˆ³è½¬æ¢åˆ°ç›®æ ‡æ—¶åŒº
                let targetTimeFormatted;
                
                if (targetTimezone === 'UTC') {
                    targetTimeFormatted = timestampToDateTime(utcTimestamp);
                } else {
                    // è·å–ç›®æ ‡æ—¶åŒºç›¸å¯¹äºUTCçš„åç§»é‡ï¼ˆè€ƒè™‘å¤ä»¤æ—¶ï¼‰
                    const targetOffset = getTimezoneOffset(targetTimezone, utcTimestamp);
                    
                    // å°†UTCæ—¶é—´æˆ³è½¬æ¢ä¸ºç›®æ ‡æ—¶åŒºæ—¶é—´æˆ³
                    const targetTimestamp = utcTimestamp + (targetOffset * 60000);
                    targetTimeFormatted = timestampToDateTime(targetTimestamp);
                }

                // è·å–å¤ä»¤æ—¶çŠ¶æ€
                const sourceDSTStatus = getDSTStatus(sourceTimezone, sourceTimestamp);
                const targetDSTStatus = getDSTStatus(targetTimezone, utcTimestamp);

                // æ˜¾ç¤ºç»“æœ
                document.getElementById('sourceTimeResult').textContent = sourceTimeFormatted;
                document.getElementById('sourceTimestampResult').textContent = utcTimestamp;
                document.getElementById('targetTimeResult').textContent = targetTimeFormatted;
                document.getElementById('targetTimestampResult').textContent = utcTimestamp;

                // æ˜¾ç¤ºå¤ä»¤æ—¶çŠ¶æ€
                const sourceDSTElement = document.getElementById('sourceDSTStatus');
                sourceDSTElement.textContent = sourceDSTStatus.status;
                sourceDSTElement.className = `dst-status ${sourceDSTStatus.className}`;

                const targetDSTElement = document.getElementById('targetDSTStatus');
                targetDSTElement.textContent = targetDSTStatus.status;
                targetDSTElement.className = `dst-status ${targetDSTStatus.className}`;

                // æ˜¾ç¤ºç»“æœåŒºåŸŸ
                document.getElementById('conversionResult').classList.add('show');

                // ä¿å­˜åˆ°å†å²è®°å½•
                saveToHistory({
                    sourceTimezone,
                    targetTimezone,
                    sourceTime: sourceTimeFormatted,
                    targetTime: targetTimeFormatted,
                    sourceTimestamp: utcTimestamp,
                    sourceDSTStatus: sourceDSTStatus.status,
                    targetDSTStatus: targetDSTStatus.status
                });

            } catch (error) {
                alert('æ—¶é—´è½¬æ¢å‡ºé”™ï¼š' + error.message);
            }
        }

        // å†å²è®°å½•ç®¡ç†
        const HISTORY_KEY = 'timeConversionHistory';
        const MAX_HISTORY = 20;

        // ä¿å­˜è½¬æ¢è®°å½•åˆ°å†å²
        function saveToHistory(conversionData) {
            const historyItem = {
                id: Date.now(),
                timestamp: new Date().toLocaleString('zh-CN'),
                ...conversionData
            };

            let history = getHistory();
            history.unshift(historyItem); // æ·»åŠ åˆ°å¼€å¤´

            // é™åˆ¶æœ€å¤šä¿å­˜20æ¡è®°å½•
            if (history.length > MAX_HISTORY) {
                history = history.slice(0, MAX_HISTORY);
            }

            localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
            updateHistoryDisplay();
        }

        // è·å–å†å²è®°å½•
        function getHistory() {
            const historyStr = localStorage.getItem(HISTORY_KEY);
            return historyStr ? JSON.parse(historyStr) : [];
        }

        // æ›´æ–°å†å²è®°å½•æ˜¾ç¤º
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            const historyEmpty = document.getElementById('historyEmpty');
            const history = getHistory();

            if (!historyList) return;

            if (history.length === 0) {
                if (historyEmpty) historyEmpty.style.display = 'block';
                return;
            }

            if (historyEmpty) historyEmpty.style.display = 'none';
            historyList.innerHTML = '';

            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div class="history-content">
                        <div class="history-conversion">
                            ${item.sourceTimezone} â†’ ${item.targetTimezone}
                        </div>
                        <div class="history-details">
                            <div class="time-conversion">
                                ${item.sourceTime} â†’ ${item.targetTime}
                            </div>
                            <div class="timestamp-info">
                                <span class="timestamp-label">æ—¶é—´æˆ³:</span>
                                <span class="timestamp-value">${item.sourceTimestamp}</span>
                            </div>
                        </div>
                    </div>
                    <div class="history-actions">
                        <button class="history-action-btn delete" onclick="deleteHistoryItem(${item.id})" title="åˆ é™¤æ­¤è®°å½•">
                            åˆ é™¤
                        </button>
                    </div>
                `;
                historyList.appendChild(historyItem);
            });
        }

        // åˆ é™¤å•æ¡å†å²è®°å½•
        function deleteHistoryItem(id) {
            let history = getHistory();
            history = history.filter(h => h.id !== id);
            localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
            updateHistoryDisplay();
        }

        // æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•
        function clearAllHistory() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•å—ï¼Ÿ')) {
                localStorage.removeItem(HISTORY_KEY);
                updateHistoryDisplay();
            }
        }

        // åˆ‡æ¢å†å²è®°å½•æ˜¾ç¤º
        function toggleHistory() {
            const historyList = document.getElementById('historyList');
            const toggleBtn = document.querySelector('.toggle-history-btn');
            
            if (!historyList || !toggleBtn) return;
            
            if (historyList.style.display === 'none') {
                historyList.style.display = 'block';
                toggleBtn.textContent = 'ğŸ“– éšè—';
            } else {
                historyList.style.display = 'none';
                toggleBtn.textContent = 'ğŸ“– å†å²';
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            init();
            updateHistoryDisplay();
        });
    </script>
</body>
</html>
